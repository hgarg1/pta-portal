<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Riverbend PTA Portal ‚Äì Family ¬∑ Principal ¬∑ Board ¬∑ Students</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ---------- GLOBAL RESET ---------- */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      background: #f3f4f6;
      color: #111827;
    }
    body.prevent-scroll {
      overflow: hidden;
    }
    a {
      text-decoration: none;
      color: inherit;
      transition: color 0.2s ease;
    }
    .portal-inline-link {
      color: #2563eb;
      text-decoration: underline;
      text-decoration-thickness: 1px;
    }
    .portal-inline-link:hover {
      color: #1d4ed8;
    }
    a:focus-visible,
    button:focus-visible {
      outline: 3px solid rgba(59, 130, 246, 0.65);
      outline-offset: 2px;
    }
    button {
      font: inherit;
      cursor: pointer;
    }

    /* ---------- ANIMATION HELPERS ---------- */
    @keyframes fade-up {
      from {
        opacity: 0;
        transform: translateY(14px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .fade-seq > * {
      opacity: 0;
      animation: fade-up 0.6s ease forwards;
    }
    .fade-seq > *:nth-child(1) {
      animation-delay: 0.05s;
    }
    .fade-seq > *:nth-child(2) {
      animation-delay: 0.12s;
    }
    .fade-seq > *:nth-child(3) {
      animation-delay: 0.19s;
    }
    .fade-seq > *:nth-child(4) {
      animation-delay: 0.26s;
    }
    .fade-seq > *:nth-child(5) {
      animation-delay: 0.33s;
    }
    .fade-seq > *:nth-child(6) {
      animation-delay: 0.4s;
    }
    .fade-seq > *:nth-child(7) {
      animation-delay: 0.47s;
    }
    .fade-seq > *:nth-child(8) {
      animation-delay: 0.54s;
    }
    .fade-seq > *:nth-child(9) {
      animation-delay: 0.61s;
    }
    .fade-seq > *:nth-child(10) {
      animation-delay: 0.68s;
    }
    .card-hover {
      transition: transform 0.24s ease, box-shadow 0.24s ease;
    }
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 34px rgba(15, 23, 42, 0.12);
    }
    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
      }
      .fade-seq > * {
        opacity: 1 !important;
      }
    }

    /* ---------- PORTAL SHELL ---------- */
    .portal-shell {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .portal-header {
      background: #0f172a;
      color: #e5e7eb;
      border-bottom: 1px solid #1e293b;
      padding: 0.75rem 1.25rem;
      position: sticky;
      top: 0;
      z-index: 40;
    }
    .portal-header-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }
    @media (max-width: 560px) {
      .portal-header-inner {
        flex-direction: column;
        align-items: flex-start;
      }
      .portal-toggle-group {
        width: 100%;
        justify-content: space-between;
      }
    }
    .portal-brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .portal-mark {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 20%, #22c55e, #22d3ee 50%, #4f46e5 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.9rem;
      color: #f9fafb;
      box-shadow: 0 12px 22px rgba(37, 99, 235, 0.5);
    }
    .portal-brand-text-main {
      font-weight: 700;
      font-size: 1rem;
    }
    .portal-brand-text-sub {
      font-size: 0.78rem;
      color: #9ca3af;
    }

    .portal-toggle-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      align-items: center;
    }
    .portal-toggle-label {
      font-size: 0.78rem;
      color: #9ca3af;
    }
    .view-toggle-btn {
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #d1d5db;
      font-size: 0.82rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      opacity: 0.75;
      transition: opacity 0.12s ease, border-color 0.12s ease, background 0.12s ease;
    }
    .view-toggle-btn span {
      font-size: 0.9rem;
    }
    .view-toggle-btn.active {
      opacity: 1;
      border-color: #22c55e;
      background: linear-gradient(120deg, #22c55e, #22d3ee, #4f46e5);
      color: #020617;
    }

    .portal-main {
      flex: 1;
    }

    /* ---------- VIEW SWITCHING ---------- */
    .view {
      display: none;
    }
    .view.active {
      display: block;
    }

    /* =========================================================
       FAMILY / PTA MOMS VIEW
       ========================================================= */
    .family-root {
      background: #f3f4f6;
      color: #111827;
    }
    .family-shell {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem 1.25rem 2.5rem;
    }

    .family-nav {
      background: #ffffff;
      border-radius: 0.9rem;
      padding: 0.8rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.04);
    }
    .family-nav-left {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .family-school-mark {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background: linear-gradient(135deg, #2563eb, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 700;
      color: #f9fafb;
    }
    .family-school-main {
      font-weight: 700;
      font-size: 0.95rem;
    }
    .family-school-sub {
      font-size: 0.78rem;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .family-nav-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.9rem;
      font-size: 0.82rem;
      color: #374151;
    }
    .family-nav-links a {
      position: relative;
      padding-bottom: 0.12rem;
    }
    .family-nav-links a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      border-radius: 999px;
      background: #2563eb;
      transition: width 0.18s ease;
    }
    .family-nav-links a:hover::after {
      width: 100%;
    }
    .family-nav-pill {
      padding: 0.35rem 0.9rem;
      border-radius: 999px;
      border: 1px solid #2563eb;
      color: #2563eb;
      background: #eff6ff;
      font-size: 0.78rem;
      font-weight: 500;
    }
    @media (max-width: 720px) {
      .family-nav {
        flex-direction: column;
        align-items: flex-start;
      }
      .family-nav-links {
        width: 100%;
        justify-content: space-between;
      }
    }

    .family-hero {
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
      gap: 2.3rem;
      align-items: center;
      margin-top: 1.6rem;
    }
    @media (max-width: 860px) {
      .family-hero {
        grid-template-columns: minmax(0, 1fr);
        text-align: center;
      }
      .family-hero-meta {
        justify-content: center;
      }
      .family-hero-actions {
        justify-content: center;
      }
    }
    @media (max-width: 520px) {
      .family-hero-meta {
        flex-direction: column;
        align-items: center;
      }
    }
    .family-hero-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.2rem 0.8rem 0.2rem 0.25rem;
      border-radius: 999px;
      background: #e0f2fe;
      color: #0f172a;
      font-size: 0.75rem;
      margin-bottom: 0.7rem;
    }
    .family-hero-tag-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
    }
    .family-hero-title {
      font-size: clamp(1.9rem, 3.1vw, 2.35rem);
      font-weight: 800;
      letter-spacing: -0.03em;
      margin-bottom: 0.6rem;
    }
    .family-hero-title span {
      color: #2563eb;
    }
    .family-hero-sub {
      font-size: 0.98rem;
      color: #4b5563;
      max-width: 32rem;
      margin-bottom: 1rem;
    }
    .family-hero-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.7rem;
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 1.2rem;
    }
    .family-hero-meta span {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: #e5e7eb;
    }
    .family-hero-meta strong {
      color: #111827;
    }
    .family-hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }
    .family-btn-primary {
      padding: 0.7rem 1.25rem;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #f9fafb;
      font-weight: 600;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      box-shadow: 0 14px 25px rgba(37, 99, 235, 0.4);
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }
    .family-btn-primary:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
      box-shadow: 0 18px 30px rgba(37, 99, 235, 0.5);
    }
    .family-btn-ghost {
      padding: 0.7rem 1.1rem;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      color: #111827;
      font-weight: 500;
      font-size: 0.88rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition: background 0.12s ease, border-color 0.12s ease;
    }
    .family-btn-ghost:hover {
      background: #f9fafb;
      border-color: #9ca3af;
    }

    .family-today-card {
      background: #ffffff;
      border-radius: 1.2rem;
      padding: 1.3rem 1.2rem 1.1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 18px 35px rgba(15, 23, 42, 0.08);
      font-size: 0.85rem;
      color: #374151;
    }
    .family-today-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.8rem;
    }
    .family-today-title {
      font-weight: 600;
      font-size: 0.95rem;
    }
    .family-today-date {
      font-size: 0.78rem;
      color: #6b7280;
    }
    .family-today-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.18rem 0.55rem;
      border-radius: 999px;
      background: #ecfdf3;
      color: #166534;
      font-size: 0.72rem;
      margin-bottom: 0.6rem;
    }
    .family-today-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #16a34a;
    }
    .family-today-list {
      list-style: none;
      display: grid;
      gap: 0.55rem;
    }
    .family-today-item-title {
      font-weight: 600;
      font-size: 0.86rem;
    }
    .family-today-item-meta {
      font-size: 0.78rem;
      color: #6b7280;
    }
    .family-today-note {
      font-size: 0.78rem;
      color: #6b7280;
      padding-top: 0.6rem;
      margin-top: 0.7rem;
      border-top: 1px dashed #e5e7eb;
    }

    .family-section {
      margin-top: 2.3rem;
    }
    .family-section-header {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: baseline;
      margin-bottom: 1.2rem;
    }
    @media (max-width: 720px) {
      .family-section-header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
    .family-section-kicker {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #6b7280;
      margin-bottom: 0.15rem;
    }
    .family-section-title {
      font-size: 1.25rem;
      font-weight: 700;
    }
    .family-section-sub {
      font-size: 0.84rem;
      color: #6b7280;
      max-width: 28rem;
    }

    .family-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      font-size: 0.8rem;
    }
    .family-filter-pill {
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #ffffff;
      color: #374151;
    }
    .family-filter-pill.active {
      background: #2563eb;
      border-color: #2563eb;
      color: #f9fafb;
    }

    .family-events-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.1rem;
    }
    .family-event-card {
      background: #ffffff;
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      padding: 1rem;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
      display: grid;
      gap: 0.4rem;
      font-size: 0.82rem;
    }
    .family-event-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #6b7280;
      margin-bottom: 0.1rem;
    }
    .family-event-badge {
      padding: 0.2rem 0.5rem;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }
    .family-event-badge--today {
      background: #ecfdf3;
      color: #166534;
    }
    .family-event-title {
      font-size: 0.98rem;
      font-weight: 600;
    }
    .family-event-meta {
      font-size: 0.8rem;
      color: #6b7280;
    }
    .family-event-meta span {
      display: inline-block;
      margin-right: 0.7rem;
    }
    .family-event-note {
      font-size: 0.8rem;
      color: #4b5563;
    }
    .family-event-tags {
      margin-top: 0.4rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
      font-size: 0.75rem;
      color: #6b7280;
    }
    .family-event-tag-pill {
      padding: 0.16rem 0.5rem;
      border-radius: 999px;
      background: #f3f4f6;
    }

    .family-vol-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.4rem;
    }
    .family-vol-card {
      background: #ffffff;
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      padding: 1.1rem;
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.06);
      font-size: 0.85rem;
      color: #374151;
    }
    .family-vol-list {
      list-style: none;
      display: grid;
      gap: 0.6rem;
      margin-top: 0.6rem;
      font-size: 0.84rem;
    }
    .family-vol-list li {
      padding-left: 1.1rem;
      position: relative;
    }
    .family-vol-list li::before {
      content: "‚Ä¢";
      position: absolute;
      left: 0.3rem;
      top: 0.02rem;
      color: #2563eb;
    }

    .family-info-card {
      background: #eef2ff;
      border-radius: 1rem;
      padding: 1rem;
      border: 1px solid #c7d2fe;
      font-size: 0.85rem;
      color: #1e293b;
    }
    .family-info-row {
      margin-top: 0.6rem;
      display: grid;
      gap: 0.6rem;
      font-size: 0.84rem;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
    .family-info-row > div {
      padding: 0.6rem 0.7rem;
      border-radius: 0.75rem;
      background: rgba(255, 255, 255, 0.6);
      border: 1px dashed rgba(37, 99, 235, 0.25);
      display: grid;
      gap: 0.25rem;
    }
    .family-info-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-top: 0.9rem;
    }
    .family-link-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.55rem 0.95rem;
      border-radius: 999px;
      border: 1px solid #2563eb;
      background: #ffffff;
      color: #1d4ed8;
      font-size: 0.8rem;
      font-weight: 600;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .family-link-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(37, 99, 235, 0.16);
    }
    .family-resource-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.1rem;
      margin-top: 1.1rem;
    }
    .family-resource-card {
      background: #ffffff;
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      padding: 1rem;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.05);
      display: grid;
      gap: 0.5rem;
      font-size: 0.84rem;
    }
    .family-resource-card strong {
      font-size: 0.9rem;
      color: #111827;
    }
    .family-resource-card ul {
      list-style: none;
      display: grid;
      gap: 0.35rem;
      font-size: 0.8rem;
      color: #4b5563;
    }
    .family-resource-card ul li::before {
      content: "‚Ä¢";
      color: #2563eb;
      margin-right: 0.35rem;
    }
    .filtered-out {
      display: none !important;
    }

    .family-footer {
      border-top: 1px solid #e5e7eb;
      background: #ffffff;
      padding: 1rem 1.25rem 1.6rem;
      margin-top: 2.5rem;
      font-size: 0.78rem;
      color: #6b7280;
    }
    .family-footer-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
      align-items: center;
    }
    .family-footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
    }

    /* =========================================================
       PRINCIPAL / DASHBOARD VIEW
       ========================================================= */
    .principal-root {
      background: #020617;
      color: #e5e7eb;
    }
    .principal-page {
      min-height: 100%;
      display: grid;
      grid-template-columns: 250px minmax(0, 1fr);
    }
    @media (max-width: 900px) {
      .principal-page {
        grid-template-columns: minmax(0, 1fr);
        grid-template-rows: auto 1fr;
      }
    }

    .principal-sidebar {
      background: radial-gradient(circle at 0% 0%, #1d4ed8 0, #020617 55%);
      border-right: 1px solid rgba(30, 64, 175, 0.7);
      padding: 1.4rem 1.1rem;
    }
    @media (max-width: 900px) {
      .principal-sidebar {
        border-right: none;
        border-bottom: 1px solid rgba(30, 64, 175, 0.7);
      }
    }
    .principal-logo {
      width: 42px;
      height: 42px;
      border-radius: 14px;
      background: radial-gradient(circle at 30% 20%, #22c55e, #22d3ee 50%, #4f46e5 80%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.9rem;
      color: #f9fafb;
      box-shadow: 0 18px 30px rgba(37, 99, 235, 0.6);
      margin-bottom: 0.8rem;
    }
    .principal-school-name {
      font-weight: 700;
      font-size: 1rem;
    }
    .principal-role {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 1.4rem;
    }
    .principal-sidebar-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #64748b;
      margin: 1.25rem 0 0.5rem;
    }
    .principal-nav-list {
      list-style: none;
      display: grid;
      gap: 0.45rem;
      font-size: 0.85rem;
    }
    .principal-nav-item {
      display: contents;
    }
    .principal-nav-link {
      padding: 0.5rem 0.75rem;
      border-radius: 0.6rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      width: 100%;
      background: transparent;
      border: 1px solid transparent;
      color: #cbd5f5;
      cursor: pointer;
      font: inherit;
      text-align: left;
      transition: background 0.2s ease, border-color 0.2s ease, color 0.2s ease,
        box-shadow 0.2s ease;
    }
    .principal-nav-link:hover {
      background: rgba(30, 64, 175, 0.22);
      color: #f8fafc;
    }
    .principal-nav-link span:last-child {
      font-size: 0.75rem;
      color: #7c8bb9;
    }
    .principal-nav-link.active {
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(129, 140, 248, 0.9);
      color: #f8fafc;
      box-shadow: 0 12px 22px rgba(30, 64, 175, 0.45);
    }
    .principal-nav-link.active span:last-child {
      color: #c7d2fe;
    }
    .principal-sidebar-note {
      margin-top: 1.4rem;
      padding: 0.8rem;
      border-radius: 0.75rem;
      border: 1px solid rgba(129, 140, 248, 0.8);
      background: rgba(15, 23, 42, 0.9);
      font-size: 0.8rem;
      color: #c7d2fe;
    }

    .principal-main {
      padding: 1.4rem 1.6rem 1.8rem;
    }
    @media (max-width: 600px) {
      .principal-main {
        padding: 1.1rem 1.1rem 1.6rem;
      }
    }

    .principal-header {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1.2rem;
    }
    @media (max-width: 700px) {
      .principal-header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
    .principal-title-block {
      display: grid;
      gap: 0.25rem;
    }
    .principal-kicker {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: #64748b;
    }
    .principal-title {
      font-size: 1.5rem;
      font-weight: 700;
    }
    .principal-sub {
      font-size: 0.86rem;
      color: #9ca3af;
      max-width: 30rem;
    }
    .principal-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      font-size: 0.82rem;
      align-items: center;
      justify-content: flex-end;
    }
    .principal-date-pill {
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 0.78rem;
      color: #9ca3af;
    }
    .principal-btn-outline {
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      background: transparent;
      color: #e5e7eb;
    }
    .principal-btn-solid {
      padding: 0.45rem 1rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(120deg, #22c55e, #22d3ee, #4f46e5);
      color: #020617;
      font-weight: 600;
      box-shadow: 0 16px 30px rgba(37, 99, 235, 0.6);
    }

    .principal-small {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .principal-summary-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 1.1rem;
      margin-bottom: 1.6rem;
    }
    @media (max-width: 1024px) {
      .principal-summary-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (max-width: 620px) {
      .principal-summary-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .principal-summary-card {
      border-radius: 0.9rem;
      padding: 0.8rem 0.85rem;
      background: radial-gradient(circle at 0% 0%, rgba(56, 189, 248, 0.15), transparent 60%),
                  rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(30, 64, 175, 0.8);
      font-size: 0.8rem;
      display: grid;
      gap: 0.15rem;
    }
    .principal-summary-label {
      color: #9ca3af;
      font-size: 0.78rem;
    }
    .principal-summary-value {
      font-size: 1rem;
      font-weight: 700;
    }
    .principal-summary-chip {
      font-size: 0.72rem;
      color: #a5b4fc;
    }
    .principal-summary-bar {
      margin-top: 0.35rem;
      height: 5px;
      border-radius: 999px;
      background: rgba(30, 64, 175, 0.8);
      overflow: hidden;
    }
    .principal-summary-bar-fill {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #22d3ee, #4f46e5);
      width: var(--fill, 50%);
    }

    .principal-grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 1.5rem;
      margin-bottom: 1.6rem;
    }
    @media (max-width: 960px) {
      .principal-grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .principal-card {
      border-radius: 1rem;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(30, 64, 175, 0.9);
      padding: 0.9rem 0.95rem 1rem;
      font-size: 0.82rem;
    }
    .principal-card-header {
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      align-items: baseline;
      margin-bottom: 0.6rem;
    }
    .principal-card-title {
      font-size: 0.9rem;
      font-weight: 600;
    }
    .principal-card-sub {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .principal-week-load {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 0.55rem;
      margin-top: 0.4rem;
    }
    .principal-day-col {
      display: grid;
      gap: 0.25rem;
      justify-items: center;
      font-size: 0.72rem;
      color: #9ca3af;
    }
    .principal-day-bar-wrapper {
      width: 100%;
      height: 80px;
      border-radius: 0.7rem;
      background: rgba(15, 23, 42, 1);
      border: 1px solid rgba(30, 64, 175, 0.8);
      display: flex;
      align-items: flex-end;
      overflow: hidden;
    }
    .principal-day-bar {
      width: 100%;
      background: linear-gradient(180deg, #22c55e, #4f46e5);
      border-radius: inherit;
      height: var(--height, 30%);
    }
    .principal-day-label {
      font-size: 0.68rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .principal-day-count {
      font-size: 0.72rem;
    }

    .principal-coverage-list {
      list-style: none;
      display: grid;
      gap: 0.45rem;
      margin-top: 0.3rem;
    }
    .principal-coverage-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8rem;
    }
    .principal-coverage-label {
      color: #cbd5f5;
    }
    .principal-coverage-meter {
      position: relative;
      width: 38%;
      height: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 1);
      overflow: hidden;
      border: 1px solid rgba(30, 64, 175, 0.9);
    }
    .principal-coverage-fill {
      height: 100%;
      width: var(--fill, 50%);
      background: linear-gradient(90deg, #ef4444, #f97316, #22c55e);
    }
    .principal-coverage-status {
      font-size: 0.76rem;
      color: #9ca3af;
      text-align: right;
      min-width: 80px;
    }

    .principal-checklist {
      list-style: none;
      display: grid;
      gap: 0.4rem;
      margin-top: 0.4rem;
    }
    .principal-checklist li {
      padding-left: 1.4rem;
      position: relative;
    }
    .principal-checklist li::before {
      content: "‚ñπ";
      position: absolute;
      left: 0;
      color: #38bdf8;
    }
    .principal-card-link {
      color: #38bdf8;
      text-decoration: underline;
      text-decoration-thickness: 1px;
    }
    .principal-card-link:hover {
      color: #22d3ee;
    }
    .principal-micro-note {
      font-size: 0.72rem;
      color: #94a3b8;
      margin-top: 0.45rem;
    }

    .principal-grid-3 {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 1.5rem;
      margin-bottom: 1.6rem;
    }
    @media (max-width: 900px) {
      .principal-grid-3 {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .principal-panel {
      display: none;
    }
    .principal-panel.active {
      display: block;
    }
    .principal-full-card {
      margin-bottom: 1.6rem;
    }
    .principal-event-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.78rem;
      margin-top: 0.6rem;
    }
    .principal-event-table th,
    .principal-event-table td {
      text-align: left;
      padding: 0.45rem 0.3rem;
      border-bottom: 1px solid rgba(30, 64, 175, 0.7);
    }
    .principal-event-table th {
      font-size: 0.72rem;
      color: #93c5fd;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    .principal-event-table tbody tr:last-child td {
      border-bottom: none;
    }
    .principal-event-table tbody tr.is-hidden {
      display: none;
    }
    .principal-event-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.16rem 0.55rem;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.25);
      color: #c7d2fe;
      font-size: 0.72rem;
      white-space: nowrap;
    }
    .principal-status-message {
      margin-top: 0.75rem;
      font-size: 0.78rem;
      color: #a5b4fc;
      min-height: 1.1rem;
      opacity: 0;
      transition: opacity 0.25s ease;
    }
    .principal-status-message.is-visible {
      opacity: 1;
    }
    .principal-highlight {
      outline: 2px solid rgba(56, 189, 248, 0.8);
      outline-offset: 3px;
      box-shadow: 0 28px 48px rgba(56, 189, 248, 0.32) !important;
    }
    .principal-inline-note {
      margin-top: 0.55rem;
    }
    .principal-filter-overlay {
      position: fixed;
      inset: 0;
      background: rgba(2, 6, 23, 0.7);
      display: none;
      align-items: flex-start;
      justify-content: center;
      padding: 6vh 1.2rem;
      z-index: 70;
    }
    .principal-filter-overlay.active {
      display: flex;
    }
    .principal-filter-panel {
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(129, 140, 248, 0.6);
      border-radius: 1rem;
      padding: 1.2rem 1.3rem;
      width: min(480px, 100%);
      color: #e5e7eb;
      box-shadow: 0 32px 60px rgba(15, 23, 42, 0.6);
    }
    .principal-filter-panel h2 {
      font-size: 1rem;
      margin-bottom: 0.6rem;
    }
    .principal-filter-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
    }
    .principal-filter-close {
      background: none;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #cbd5f5;
      border-radius: 999px;
      padding: 0.2rem 0.6rem;
      cursor: pointer;
    }
    .principal-filter-close:hover {
      background: rgba(30, 64, 175, 0.3);
    }
    .principal-filter-group {
      margin-top: 0.8rem;
      display: grid;
      gap: 0.45rem;
    }
    .principal-filter-group legend {
      font-size: 0.78rem;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }
    .principal-filter-options {
      display: flex;
      flex-wrap: wrap;
      gap: 0.55rem;
    }
    .principal-filter-option {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.35rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(129, 140, 248, 0.6);
      background: rgba(30, 41, 59, 0.85);
      font-size: 0.78rem;
    }
    .principal-filter-option input {
      accent-color: #38bdf8;
    }
    .principal-filter-actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.6rem;
      margin-top: 1.1rem;
    }
    .principal-btn-outline.filters-active {
      border-color: rgba(129, 140, 248, 0.9);
      color: #c7d2fe;
    }
    .principal-btn-outline[aria-expanded="true"] {
      background: rgba(30, 64, 175, 0.2);
    }

    .principal-interest-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      margin-top: 0.4rem;
    }
    .principal-interest-table th,
    .principal-interest-table td {
      text-align: left;
      padding: 0.35rem 0.25rem;
      border-bottom: 1px solid rgba(30, 64, 175, 0.7);
    }
    .principal-interest-table th {
      font-size: 0.75rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .principal-interest-badge {
      font-size: 0.72rem;
      padding: 0.18rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(94, 234, 212, 0.8);
      color: #a5f3fc;
    }

    .principal-risk-list {
      list-style: none;
      display: grid;
      gap: 0.45rem;
      margin-top: 0.35rem;
      font-size: 0.8rem;
    }
    .principal-risk-item {
      padding: 0.5rem 0.55rem;
      border-radius: 0.7rem;
      background: rgba(15, 23, 42, 1);
      border: 1px solid rgba(30, 64, 175, 0.9);
      display: grid;
      gap: 0.1rem;
    }
    .principal-risk-tag-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 0.75rem;
      color: #9ca3af;
    }
    .principal-risk-level {
      font-size: 0.72rem;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      border: 1px solid;
    }
    .principal-risk-low {
      border-color: #22c55e;
      color: #bbf7d0;
    }
    .principal-risk-med {
      border-color: #f97316;
      color: #fed7aa;
    }
    .principal-risk-high {
      border-color: #ef4444;
      color: #fecaca;
    }
    .principal-risk-text {
      font-size: 0.78rem;
      color: #e5e7eb;
    }

    /* =========================================================
       PTA BOARD VIEW
       ========================================================= */
    .board-root {
      background: #f9fafb;
      color: #111827;
    }
    .board-shell {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.6rem 1.25rem 2.3rem;
    }
    .board-header {
      display: flex;
      justify-content: space-between;
      gap: 1.5rem;
      align-items: flex-start;
      margin-bottom: 1.7rem;
    }
    @media (max-width: 768px) {
      .board-header {
        flex-direction: column;
      }
    }
    .board-title-block {
      display: grid;
      gap: 0.35rem;
    }
    .board-kicker {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: #6b7280;
    }
    .board-title {
      font-size: 1.4rem;
      font-weight: 700;
    }
    .board-sub {
      font-size: 0.88rem;
      color: #4b5563;
      max-width: 32rem;
    }
    .board-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.28rem 0.75rem;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      font-size: 0.78rem;
      border: 1px solid #c7d2fe;
    }
    .board-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1fr);
      gap: 1.5rem;
      margin-bottom: 1.8rem;
    }
    @media (max-width: 900px) {
      .board-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .board-section-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .board-section-sub {
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 0.9rem;
    }
    .board-officers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.15rem;
    }
    .board-card {
      background: #ffffff;
      border-radius: 0.9rem;
      padding: 0.9rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.04);
      font-size: 0.82rem;
      display: grid;
      gap: 0.25rem;
    }
    .board-role {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #6b7280;
    }
    .board-name {
      font-weight: 600;
      font-size: 0.95rem;
    }
    .board-contact {
      font-size: 0.78rem;
      color: #6b7280;
    }
    .board-focus-tags {
      margin-top: 0.3rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
      font-size: 0.75rem;
    }
    .board-tag-pill {
      padding: 0.16rem 0.5rem;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }
    .board-meeting-card {
      background: #ffffff;
      border-radius: 1rem;
      padding: 1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
      font-size: 0.84rem;
      color: #374151;
      display: grid;
      gap: 0.55rem;
      align-self: flex-start;
    }
    .board-meeting-row {
      font-size: 0.82rem;
    }
    .board-meeting-row strong {
      color: #111827;
    }
    .board-meeting-note {
      font-size: 0.78rem;
      color: #6b7280;
    }

    .board-docs-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 1.5rem;
    }
    @media (max-width: 900px) {
      .board-docs-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .board-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      background: #ffffff;
      border-radius: 0.9rem;
      overflow: hidden;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.04);
    }
    .board-table th,
    .board-table td {
      padding: 0.55rem 0.8rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }
    .board-table th {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #6b7280;
      background: #f9fafb;
    }
    .board-doc-link {
      color: #2563eb;
      text-decoration: underline;
      text-decoration-thickness: 1px;
    }
    .board-doc-link:hover {
      color: #1d4ed8;
    }
    .board-doc-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.16rem 0.5rem;
      border-radius: 999px;
      background: #ecfdf3;
      color: #166534;
      font-size: 0.72rem;
    }
    .board-quick-card {
      background: #eef2ff;
      border-radius: 1rem;
      padding: 0.95rem;
      border: 1px solid #c7d2fe;
      font-size: 0.84rem;
      color: #1e293b;
      display: grid;
      gap: 0.5rem;
    }
    .board-quick-list {
      list-style: none;
      padding-left: 1rem;
      font-size: 0.8rem;
      color: #4b5563;
    }
    .board-quick-list li {
      margin-bottom: 0.25rem;
      position: relative;
    }
    .board-quick-list li::before {
      content: "‚Ä¢";
      position: absolute;
      left: -0.7rem;
      top: 0;
      color: #4f46e5;
    }
    .board-doc-detail {
      background: #ffffff;
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      padding: 1rem;
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.05);
      display: grid;
      gap: 0.55rem;
      font-size: 0.84rem;
      color: #374151;
      margin-bottom: 1.2rem;
    }
    .board-doc-detail h3 {
      font-size: 1rem;
      font-weight: 700;
    }
    .board-doc-detail ul {
      list-style: none;
      padding-left: 1.1rem;
      display: grid;
      gap: 0.35rem;
    }
    .board-doc-detail ul li {
      position: relative;
    }
    .board-doc-detail ul li::before {
      content: "‚Äì";
      position: absolute;
      left: -0.7rem;
      color: #4b5563;
    }
    .board-resource-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.25rem;
      margin-top: 1.1rem;
    }
    .board-resource-card {
      background: #eef2ff;
      border-radius: 1rem;
      padding: 0.95rem;
      border: 1px solid #c7d2fe;
      font-size: 0.82rem;
      color: #1e293b;
      display: grid;
      gap: 0.45rem;
    }
    .board-resource-card a {
      color: #4f46e5;
      text-decoration: underline;
      text-decoration-thickness: 1px;
    }
    .board-resource-card a:hover {
      color: #312e81;
    }

    /* =========================================================
       STUDENT VIEW
       ========================================================= */
    .student-root {
      background: radial-gradient(circle at top, #e0f2fe 0, #f9fafb 38%, #fef3c7 100%);
      color: #111827;
    }
    .student-shell {
      max-width: 880px;
      margin: 0 auto;
      padding: 1.5rem 1.25rem 2.3rem;
    }
    .student-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .student-kicker {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #6b7280;
    }
    .student-title {
      font-size: 1.6rem;
      font-weight: 800;
      letter-spacing: -0.04em;
      margin-top: 0.2rem;
    }
    .student-title span {
      color: #2563eb;
    }
    .student-sub {
      font-size: 0.9rem;
      color: #4b5563;
      margin-top: 0.4rem;
    }

    .student-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.2rem;
      margin-bottom: 1.5rem;
    }

    .student-card {
      background: #ffffff;
      border-radius: 1rem;
      padding: 0.9rem 1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.05);
      font-size: 0.88rem;
    }
    .student-card-title {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 0.4rem;
    }
    .student-emoji {
      font-size: 1.2rem;
    }
    .student-list {
      list-style: none;
      margin-top: 0.35rem;
      display: grid;
      gap: 0.4rem;
      font-size: 0.86rem;
      color: #374151;
    }
    .student-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      font-size: 0.76rem;
      background: #eff6ff;
      color: #1d4ed8;
      margin-left: 0.3rem;
    }
    .student-badge.green {
      background: #ecfdf3;
      color: #166534;
    }

    .student-checklist {
      list-style: none;
      display: grid;
      gap: 0.4rem;
      margin-top: 0.4rem;
      font-size: 0.85rem;
      color: #374151;
    }
    .student-checklist li {
      padding-left: 1.3rem;
      position: relative;
    }
    .student-checklist li::before {
      content: "‚úì";
      position: absolute;
      left: 0;
      top: 0.02rem;
      color: #16a34a;
      font-size: 0.9rem;
    }

    .student-tips {
      background: #fef9c3;
      border-radius: 1rem;
      padding: 0.9rem 1rem;
      border: 1px solid #facc15;
      font-size: 0.86rem;
      color: #854d0e;
      margin-bottom: 1.4rem;
    }
    .student-tips strong {
      display: block;
      margin-bottom: 0.3rem;
    }
    .student-tips-list {
      list-style: none;
      margin-top: 0.35rem;
      padding-left: 1rem;
    }
    .student-tips-list li {
      margin-bottom: 0.25rem;
      position: relative;
    }
    .student-tips-list li::before {
      content: "‚òÖ";
      position: absolute;
      left: -0.95rem;
      top: 0;
      font-size: 0.7rem;
    }

    .student-link-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 1rem;
      margin-top: 1.1rem;
    }
    .student-link-card {
      background: rgba(37, 99, 235, 0.08);
      border-radius: 1rem;
      padding: 0.85rem 1rem;
      border: 1px solid rgba(37, 99, 235, 0.2);
      font-size: 0.84rem;
      color: #1e3a8a;
      display: grid;
      gap: 0.4rem;
    }
    .student-link-card a {
      color: #1d4ed8;
      text-decoration: underline;
      text-decoration-thickness: 2px;
      font-weight: 600;
    }
    .student-link-card a:hover {
      color: #1e40af;
    }

    .student-footer-note {
      text-align: center;
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.8rem;
    }
  </style>
</head>
<body>
  <div class="portal-shell">
    <!-- GLOBAL HEADER -->
    <header class="portal-header">
      <div class="portal-header-inner">
        <div class="portal-brand">
          <div class="portal-mark">RB</div>
          <div>
            <div class="portal-brand-text-main">Riverbend Elementary PTA Portal</div>
            <div class="portal-brand-text-sub">Family ¬∑ Principal ¬∑ Board ¬∑ Students</div>
          </div>
        </div>
        <div class="portal-toggle-group">
          <span class="portal-toggle-label">View as:</span>
          <button class="view-toggle-btn active" data-view-target="family-view">
            <span>üåº</span> PTA Family
          </button>
          <button class="view-toggle-btn" data-view-target="principal-view">
            <span>üéì</span> Principal
          </button>
          <button class="view-toggle-btn" data-view-target="pta-board-view">
            <span>üìù</span> PTA Board
          </button>
          <button class="view-toggle-btn" data-view-target="student-view">
            <span>üéí</span> Students
          </button>
        </div>
      </div>
    </header>

    <main class="portal-main">
      <!-- ================= FAMILY VIEW ================= -->
      <section id="family-view" class="view active family-root">
        <div class="family-shell">
          <div class="family-nav">
            <div class="family-nav-left">
              <div class="family-school-mark">PTA</div>
              <div>
                <div class="family-school-main">Riverbend Elementary</div>
                <div class="family-school-sub">Parent‚ÄìTeacher Association</div>
              </div>
            </div>
            <nav class="family-nav-links">
              <a href="#family-this-week">This Week</a>
              <a href="#family-upcoming">Upcoming</a>
              <a href="#family-volunteer">Volunteer</a>
              <a href="#family-resources">Resources</a>
              <a href="#family-info" class="family-nav-pill">Stay Informed</a>
            </nav>
          </div>

          <section class="family-hero">
            <div>
              <div class="family-hero-tag">
                <div class="family-hero-tag-dot"></div>
                <span>Made for busy families</span>
              </div>
              <h1 class="family-hero-title">
                One place for every <span>school event</span>.
              </h1>
              <p class="family-hero-sub">
                See what‚Äôs happening this week, what‚Äôs coming up, and where you can jump in to help ‚Äî
                all in a simple, parent-friendly view.
              </p>
              <div class="family-hero-meta">
                <span><strong>Today:</strong> Quick snapshot of events</span>
                <span><strong>Green labels:</strong> Happening this week</span>
                <span><strong>Blue labels:</strong> Plan-ahead dates</span>
              </div>
              <div class="family-hero-actions">
                <button class="family-btn-primary"
                  onclick="document.getElementById('family-this-week').scrollIntoView({behavior:'smooth'})">
                  View this week‚Äôs events ‚Üí
                </button>
                <button class="family-btn-ghost"
                  onclick="document.getElementById('family-upcoming').scrollIntoView({behavior:'smooth'})">
                  Jump to upcoming months
                </button>
              </div>
            </div>

            <aside class="family-today-card card-hover" aria-label="Today's overview">
              <div class="family-today-header">
                <div>
                  <div class="family-today-title">Today at a Glance</div>
                  <div class="family-today-date" id="family-today-date">Today‚Äôs date</div>
                </div>
              </div>
              <div class="family-today-pill">
                <div class="family-today-pill-dot"></div>
                <span>Happening today</span>
              </div>
              <ul class="family-today-list">
                <li>
                  <div class="family-today-item-title">Book Fair ‚Äì Family Shopping Night</div>
                  <div class="family-today-item-meta">
                    5:00 ‚Äì 7:30 PM ¬∑ School Library
                  </div>
                </li>
                <li>
                  <div class="family-today-item-title">PTA General Meeting (Hybrid)</div>
                  <div class="family-today-item-meta">
                    7:00 ‚Äì 8:00 PM ¬∑ Media Center &amp; Zoom
                  </div>
                </li>
                <li>
                  <div class="family-today-item-title">Walk &amp; Roll to School Day meetup</div>
                  <div class="family-today-item-meta">
                    7:10 ‚Äì 7:45 AM ¬∑ Front parking lot check-in tent
                  </div>
                </li>
              </ul>
              <div class="family-today-note">
                Running late? Text the PTA hotline at <a class="portal-inline-link" href="sms:+15551234567">(555)
                  123-4567</a> and a volunteer will save you a seat or check in your student badge.
              </div>
            </aside>
          </section>

          <section id="family-this-week" class="family-section">
            <div class="family-section-header">
              <div>
                <div class="family-section-kicker">This Week</div>
                <h2 class="family-section-title">Events happening now.</h2>
              </div>
              <p class="family-section-sub">
                Green ‚ÄúThis week‚Äù labels mean these are current events. If you only have a few minutes,
                this is the section to scan.
              </p>
            </div>

            <div class="family-filters" role="toolbar" aria-label="Filter this week's events">
              <button class="family-filter-pill active" type="button" data-filter="all" aria-pressed="true">
                All this week
              </button>
              <button class="family-filter-pill" type="button" data-filter="evening" aria-pressed="false">
                Evening events
              </button>
              <button class="family-filter-pill" type="button" data-filter="students" aria-pressed="false">
                For students
              </button>
              <button class="family-filter-pill" type="button" data-filter="grownups" aria-pressed="false">
                For grown-ups
              </button>
            </div>



            <div class="family-events-grid fade-seq">
              <article class="family-event-card card-hover" data-categories="evening,families">
                <div class="family-event-badges">
                  <span class="family-event-badge family-event-badge--today">Today</span>
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">Book Fair ‚Äì Family Shopping Night</h3>
                <div class="family-event-meta">
                  <span>üìÖ Tuesday, 5:00 ‚Äì 7:30 PM</span>
                  <span>üìç School Library</span>
                </div>
                <p class="family-event-note">
                  Teacher wish-lists are posted by grade level. Cash, card, and e-wallet accepted. PTA readers are
                  available for younger students.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Family event</span>
                  <span class="family-event-tag-pill">Fundraiser</span>
                </div>
              </article>

              <article class="family-event-card card-hover" data-categories="students,morning">
                <div class="family-event-badges">
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">Walk &amp; Roll to School Day</h3>
                <div class="family-event-meta">
                  <span>üìÖ Wednesday, 7:10 ‚Äì 7:45 AM</span>
                  <span>üìç Front parking lot</span>
                </div>
                <p class="family-event-note">
                  Meet at the blue PTA tent for stickers and hot cocoa. Volunteers will lead walking groups down Park
                  Avenue and River Trail.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Health &amp; wellness</span>
                  <span class="family-event-tag-pill">Students</span>
                </div>
              </article>

              <article class="family-event-card card-hover" data-categories="grownups,daytime">
                <div class="family-event-badges">
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">Teacher Appreciation Snack Cart</h3>
                <div class="family-event-meta">
                  <span>üìÖ Thursday, 8:30 ‚Äì 11:30 AM</span>
                  <span>üìç Staff lounge</span>
                </div>
                <p class="family-event-note">
                  Drop donations at morning car line or sign up for a restock shift in the <a class="portal-inline-link"
                    href="#family-volunteer">volunteer hub</a>. Gluten-free and caffeine-free options welcome.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Staff support</span>
                  <span class="family-event-tag-pill">Donations</span>
                </div>
              </article>

              <article class="family-event-card card-hover" data-categories="evening,grownups">
                <div class="family-event-badges">
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">PTA Meeting &amp; Budget Q&amp;A</h3>
                <div class="family-event-meta">
                  <span>üìÖ Tuesday, 7:00 ‚Äì 8:00 PM</span>
                  <span>üìç Media Center &amp; Zoom</span>
                </div>
                <p class="family-event-note">
                  Quick updates on fall fundraisers followed by an open Q&amp;A with the treasurer. Zoom link emailed at
                  noon; recordings posted within 24 hours.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Grown-up focus</span>
                  <span class="family-event-tag-pill">Finance</span>
                </div>
              </article>

              <article class="family-event-card card-hover" data-categories="students,after-school">
                <div class="family-event-badges">
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">Chess Club Tournament Practice</h3>
                <div class="family-event-meta">
                  <span>üìÖ Thursday, 3:00 ‚Äì 4:15 PM</span>
                  <span>üìç Innovation Lab</span>
                </div>
                <p class="family-event-note">
                  Open to 3rd‚Äì5th graders. Boards provided; bring a water bottle. Parents pick up at the car-rider loop at
                  4:20 PM.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Students</span>
                  <span class="family-event-tag-pill">Clubs</span>
                </div>
              </article>

              <article class="family-event-card card-hover" data-categories="grownups,daytime">
                <div class="family-event-badges">
                  <span class="family-event-badge">This week</span>
                </div>
                <h3 class="family-event-title">Lunchroom Buddy Express Shift</h3>
                <div class="family-event-meta">
                  <span>üìÖ Friday, 11:15 AM ‚Äì 12:45 PM</span>
                  <span>üìç Cafeteria</span>
                </div>
                <p class="family-event-note">
                  Spend one lunch period helping younger grades open containers and clean up. Background check on file
                  required ‚Äî complete it online if you haven‚Äôt yet.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Volunteer shift</span>
                  <span class="family-event-tag-pill">Grown-ups</span>
                </div>
              </article>
            </div>
          </section>

          <section id="family-upcoming" class="family-section">
            <div class="family-section-header">
              <div>
                <div class="family-section-kicker">Upcoming</div>
                <h2 class="family-section-title">Events to plan ahead for.</h2>
              </div>
              <p class="family-section-sub">
                These dates are a little further out. Add them to your calendar now so nothing sneaks up on you.
              </p>
            </div>

            <div class="family-events-grid fade-seq">
              <article class="family-event-card card-hover">
                <div class="family-event-badges">
                  <span class="family-event-badge">Next week</span>
                </div>
                <h3 class="family-event-title">Fall Family Movie Night</h3>
                <div class="family-event-meta">
                  <span>üìÖ Friday, 6:30 ‚Äì 8:30 PM</span>
                  <span>üìç Gymnasium</span>
                </div>
                <p class="family-event-note">
                  Bring blankets and lawn chairs. Concessions will be available (cash and card).
                  Children must be accompanied by an adult.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Family event</span>
                  <span class="family-event-tag-pill">PTA fundraiser</span>
                </div>
              </article>

              <article class="family-event-card card-hover">
                <div class="family-event-badges">
                  <span class="family-event-badge">Later this month</span>
                </div>
                <h3 class="family-event-title">STEM Night &amp; Classroom Showcase</h3>
                <div class="family-event-meta">
                  <span>üìÖ Thursday, 6:00 ‚Äì 7:30 PM</span>
                  <span>üìç Classrooms &amp; Cafeteria</span>
                </div>
                <p class="family-event-note">
                  Hands-on science and technology stations around the building. Great opportunity
                  to see classroom projects and meet other families.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Academics</span>
                  <span class="family-event-tag-pill">Hands-on</span>
                </div>
              </article>

              <article class="family-event-card card-hover">
                <div class="family-event-badges">
                  <span class="family-event-badge">Next month</span>
                </div>
                <h3 class="family-event-title">Winter Concert &amp; Art Walk</h3>
                <div class="family-event-meta">
                  <span>üìÖ Date TBA (evening)</span>
                  <span>üìç Auditorium &amp; Hallways</span>
                </div>
                <p class="family-event-note">
                  Student performances followed by an art walk featuring work from all grade levels.
                  Exact date will be shared once confirmed.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Fine arts</span>
                  <span class="family-event-tag-pill">Families welcome</span>
                </div>
              </article>

              <article class="family-event-card card-hover">
                <div class="family-event-badges">
                  <span class="family-event-badge">Early November</span>
                </div>
                <h3 class="family-event-title">Holiday Giving Tree Kickoff</h3>
                <div class="family-event-meta">
                  <span>üìÖ Monday, Nov 4 ‚Äì Friday, Nov 15</span>
                  <span>üìç Front office lobby</span>
                </div>
                <p class="family-event-note">
                  Pick an ornament with a requested item for a Riverbend family. Gifts are returned unwrapped by Nov 15 so
                  counselors can distribute them before break.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Community care</span>
                  <span class="family-event-tag-pill">Donations</span>
                </div>
              </article>

              <article class="family-event-card card-hover">
                <div class="family-event-badges">
                  <span class="family-event-badge">Next month</span>
                </div>
                <h3 class="family-event-title">Community Garden Clean-Up Day</h3>
                <div class="family-event-meta">
                  <span>üìÖ Saturday, Nov 9 ¬∑ 9:00 ‚Äì 11:30 AM</span>
                  <span>üìç School garden (behind cafeteria)</span>
                </div>
                <p class="family-event-note">
                  Bring garden gloves and water bottles. PTA provides tools and snacks. Great for families who like hands-on
                  projects.
                </p>
                <div class="family-event-tags">
                  <span class="family-event-tag-pill">Outdoor</span>
                  <span class="family-event-tag-pill">All ages</span>
                </div>
              </article>
            </div>
          </section>

          <section id="family-volunteer" class="family-section">
            <div class="family-section-header">
              <div>
                <div class="family-section-kicker">Volunteer &amp; Sign-ups</div>
                <h2 class="family-section-title">Ways to help (big and small).</h2>
              </div>
              <p class="family-section-sub">
                You do not have to be ‚Äúon the board‚Äù to help. A single hour makes a real difference.
                Choose what fits your week.
              </p>
            </div>

            <div class="family-vol-grid fade-seq">
              <div class="family-vol-card card-hover">
                <strong>This week‚Äôs needs</strong>
                <ul class="family-vol-list">
                  <li>Book Fair: 30-minute check-out helpers (evening slots).</li>
                  <li>Walk &amp; Roll Day: 3 adults to help at crosswalks from 7:10‚Äì7:40 AM.</li>
                  <li>Snack Cart: bottled water, granola bars, single-serve tea/coffee pods.</li>
                </ul>
                <p style="margin-top:0.7rem;">
                  To sign up, please use the PTA e-mail below or the sign-up links shared in the
                  weekly newsletter. It‚Äôs always okay to bring younger siblings with you.
                </p>
                <a class="family-btn-primary" style="margin-top:0.8rem;" href="https://riverbendpta.example.org/volunteer-signup"
                  target="_blank" rel="noopener">
                  Open volunteer sign-up form
                </a>
              </div>

              <div class="family-vol-card card-hover">
                <strong>Low-pressure ways to support</strong>
                <ul class="family-vol-list">
                  <li>Share PTA events in your classroom chats or carpool groups.</li>
                  <li>Ask your workplace about matching gifts for school fundraisers.</li>
                  <li>Drop a thank-you note in the office for a favorite staff member.</li>
                  <li>Attend one PTA meeting this semester to stay in the loop.</li>
                </ul>
                <p style="margin-top:0.7rem; font-size:0.8rem; color:#6b7280;">
                  There is no minimum time commitment. Your presence at events already counts as support.
                </p>
              </div>

              <div class="family-vol-card card-hover">
                <strong>Recurring opportunities</strong>
                <ul class="family-vol-list">
                  <li>
                    <a class="portal-inline-link" href="https://riverbendpta.example.org/signup/lunchroom" target="_blank"
                      rel="noopener">Lunchroom Buddy rotation</a> ¬∑ 45-minute shifts assisting grades K‚Äì2.
                  </li>
                  <li>
                    <a class="portal-inline-link" href="https://riverbendpta.example.org/signup/library" target="_blank"
                      rel="noopener">Library shelving crew</a> ¬∑ help Mrs. Owens re-shelve books on Fridays.
                  </li>
                  <li>
                    <a class="portal-inline-link" href="https://riverbendpta.example.org/signup/garden" target="_blank"
                      rel="noopener">Garden keepers</a> ¬∑ adopt a planter box for monthly watering and weeding.
                  </li>
                </ul>
                <p style="margin-top:0.7rem; font-size:0.8rem;">
                  Need to update your background check? Complete the district form at
                  <a class="portal-inline-link" href="https://riverbendpta.example.org/background-check" target="_blank"
                    rel="noopener">riverbendpta.example.org/background-check</a> before your first shift.
                </p>
              </div>
            </div>
          </section>

          <section id="family-info" class="family-section">
            <div class="family-section-header">
              <div>
                <div class="family-section-kicker">Stay Informed</div>
                <h2 class="family-section-title">Never miss an event reminder.</h2>
              </div>
            </div>

            <div class="family-info-card card-hover" id="family-info-card">
              <strong>Choose at least one way to stay updated:</strong>
              <div class="family-info-row">
                <div>
                  <strong>üìß Weekly PTA e-mail</strong>
                  <p style="margin-top:0.35rem; font-size:0.8rem; color:#374151;">
                    Sent on Sunday evenings with highlights for the coming week, direct links to sign-ups, and any forms due soon.
                  </p>
                </div>
                <div>
                  <strong>üì± Text alerts</strong>
                  <p style="margin-top:0.35rem; font-size:0.8rem; color:#374151;">
                    Same-day nudges such as ‚ÄúMovie Night tonight at 6:30 PM.‚Äù Opt out anytime by replying STOP.
                  </p>
                </div>
                <div>
                  <strong>üìÜ Shared calendar</strong>
                  <p style="margin-top:0.35rem; font-size:0.8rem; color:#374151;">
                    Subscribe once and every PTA event appears on your phone and computer calendars automatically.
                  </p>
                </div>
              </div>
              <div class="family-info-actions">
                <a class="family-link-btn" href="mailto:subscribe@riverbendpta.example.org?subject=Add%20me%20to%20PTA%20updates">
                  Request weekly e-mails
                </a>
                <a class="family-link-btn" href="https://riverbendpta.example.org/text-alerts" target="_blank" rel="noopener">
                  Join text alerts
                </a>
                <a class="family-link-btn" href="https://riverbendpta.example.org/calendar.ics" target="_blank" rel="noopener">
                  Download calendar (.ics)
                </a>
              </div>
              <p style="margin-top:0.8rem; font-size:0.78rem; color:#4b5563;">
                Questions? Reply to any update or e-mail <a class="portal-inline-link" href="mailto:pta@riverbendelementary.org">pta@riverbendelementary.org</a>.
                We can add grandparents or caregivers too.
              </p>
            </div>

            <section id="family-resources" class="family-section" aria-label="Family resources and downloads">
              <div class="family-section-header">
                <div>
                  <div class="family-section-kicker">Quick resources</div>
                  <h2 class="family-section-title">Helpful guides, forms, and how-tos.</h2>
                </div>
                <p class="family-section-sub">
                  Save or share these cheat sheets whenever a new event pops up. They‚Äôre updated as details change.
                </p>
              </div>

              <div class="family-resource-grid fade-seq">
                <article class="family-resource-card card-hover" id="family-checklist">
                  <strong>Family event checklist</strong>
                  <ul>
                    <li><a class="portal-inline-link" href="https://riverbendpta.example.org/checklists/family-night.pdf" target="_blank" rel="noopener">Family Night printable checklist (PDF)</a></li>
                    <li>Includes suggested arrival times, what to bring, and student pick-up notes.</li>
                  </ul>
                </article>

                <article class="family-resource-card card-hover" id="family-calendar">
                  <strong>Master calendar &amp; reminders</strong>
                  <ul>
                    <li><a class="portal-inline-link" href="https://riverbendpta.example.org/calendar" target="_blank" rel="noopener">View the interactive PTA calendar</a></li>
                    <li>Syncs automatically with Google, Apple, and Outlook once added.</li>
                  </ul>
                </article>

                <article class="family-resource-card card-hover" id="family-forms">
                  <strong>Forms &amp; contacts</strong>
                  <ul>
                    <li><a class="portal-inline-link" href="https://riverbendpta.example.org/forms/reimbursement.pdf" target="_blank" rel="noopener">Reimbursement request (PDF)</a></li>
                    <li><a class="portal-inline-link" href="mailto:roomparents@riverbendpta.example.org">Room parent coordinator</a> ¬∑ share classroom-specific questions.</li>
                  </ul>
                </article>
              </div>
            </section>
          </section>
        </div>

        <footer class="family-footer">
          <div class="family-footer-inner">
            <div>¬© <span id="family-year"></span> Riverbend Elementary PTA ¬∑ For questions, e-mail <strong>pta@riverbendelementary.org</strong></div>
            <div class="family-footer-links">
              <a href="#family-this-week">This week</a>
              <a href="#family-upcoming">Upcoming</a>
              <a href="#family-volunteer">Volunteer</a>
              <a href="#family-resources">Resources</a>
            </div>
          </div>
        </footer>
      </section>

      <!-- ================= PRINCIPAL VIEW ================= -->
      <section id="principal-view" class="view principal-root">
        <div class="principal-page">
          <aside class="principal-sidebar">
            <div class="principal-logo">RB</div>
            <div class="principal-school-name">Riverbend Elementary</div>
            <div class="principal-role">Principal dashboard ¬∑ PTA events</div>

            <div class="principal-sidebar-title">View</div>
            <ul class="principal-nav-list">
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link active" data-panel-target="this-week" aria-pressed="true">
                  <span>This week</span>
                  <span>5 events</span>
                </button>
              </li>
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link" data-panel-target="next-30" aria-pressed="false">
                  <span>Next 30 days</span>
                  <span>12 events</span>
                </button>
              </li>
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link" data-panel-target="by-grade" aria-pressed="false">
                  <span>By grade level</span>
                  <span>Overview</span>
                </button>
              </li>
            </ul>

            <div class="principal-sidebar-title">Quick checks</div>
            <ul class="principal-nav-list">
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link" data-panel-force="this-week"
                  data-scroll-target="#principal-volunteer-card" data-highlight-target="#principal-volunteer-card">
                  <span>Volunteer coverage</span>
                  <span>2 low</span>
                </button>
              </li>
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link" data-panel-force="this-week"
                  data-scroll-target="#principal-events-card" data-filter-timing="evening"
                  data-quick-message="Filtered to evening events for this week.">
                  <span>Evening events</span>
                  <span>3 this week</span>
                </button>
              </li>
              <li class="principal-nav-item">
                <button type="button" class="principal-nav-link" data-panel-force="this-week"
                  data-scroll-target="#principal-load-card" data-highlight-target="#principal-load-card"
                  data-quick-message="Review building load and staffing balance.">
                  <span>Building load</span>
                  <span>Balanced</span>
                </button>
              </li>
            </ul>

            <div class="principal-sidebar-note">
              This dashboard summarizes PTA activity so you can spot busy nights,
              staffing gaps, and parent interest at a glance ‚Äî without reading every flyer.
            </div>
          </aside>

          <main class="principal-main">
            <header class="principal-header">
              <div class="principal-title-block">
                <div class="principal-kicker" id="principal-view-kicker">This Week ¬∑ Snapshot</div>
                <h1 class="principal-title" id="principal-view-title">PTA events and building impact</h1>
                <p class="principal-sub" id="principal-view-sub">
                  Current week overview. Green means comfortably covered, orange needs a second look,
                  red means something may need to move or get extra support.
                </p>
              </div>
              <div class="principal-controls">
                <span class="principal-date-pill" id="principal-date-pill">Week of ‚Äî</span>
                <button class="principal-btn-outline" type="button" id="principal-filter-btn" aria-expanded="false">
                  Adjust filters
                </button>
                <button class="principal-btn-solid" type="button" id="principal-export-btn">
                  Export snapshot
                </button>
              </div>
            </header>
            <p class="principal-status-message" id="principal-status-message" role="status" aria-live="polite"></p>

            <div class="principal-filter-overlay" id="principal-filter-overlay" hidden>
              <div class="principal-filter-panel" role="dialog" aria-modal="true"
                aria-labelledby="principal-filter-heading">
                <div class="principal-filter-header">
                  <h2 id="principal-filter-heading">Adjust event filters</h2>
                  <button type="button" class="principal-filter-close" id="principal-filter-close">Close</button>
                </div>
                <form id="principal-filter-form">
                  <fieldset class="principal-filter-group">
                    <legend>Focus areas</legend>
                    <div class="principal-filter-options">
                      <label class="principal-filter-option" for="principal-filter-family">
                        <input type="checkbox" id="principal-filter-family" name="focus" value="family" checked />
                        Family events
                      </label>
                      <label class="principal-filter-option" for="principal-filter-staff">
                        <input type="checkbox" id="principal-filter-staff" name="focus" value="staff" checked />
                        Staff support
                      </label>
                      <label class="principal-filter-option" for="principal-filter-students">
                        <input type="checkbox" id="principal-filter-students" name="focus" value="students" checked />
                        Student-facing
                      </label>
                      <label class="principal-filter-option" for="principal-filter-community">
                        <input type="checkbox" id="principal-filter-community" name="focus" value="community" checked />
                        Community / fundraising
                      </label>
                    </div>
                  </fieldset>
                  <fieldset class="principal-filter-group">
                    <legend>Timing</legend>
                    <div class="principal-filter-options">
                      <label class="principal-filter-option" for="principal-filter-morning">
                        <input type="checkbox" id="principal-filter-morning" name="timing" value="morning" checked />
                        Morning
                      </label>
                      <label class="principal-filter-option" for="principal-filter-schoolday">
                        <input type="checkbox" id="principal-filter-schoolday" name="timing" value="schoolday" checked />
                        School day
                      </label>
                      <label class="principal-filter-option" for="principal-filter-evening">
                        <input type="checkbox" id="principal-filter-evening" name="timing" value="evening" checked />
                        Evening
                      </label>
                    </div>
                  </fieldset>
                  <div class="principal-filter-actions">
                    <button type="button" class="principal-btn-outline" id="principal-filter-reset">Reset</button>
                    <button type="submit" class="principal-btn-solid">Apply filters</button>
                  </div>
                </form>
              </div>
            </div>

            <div class="principal-panel active" data-panel="this-week" id="principal-panel-this-week">
              <section class="principal-summary-grid" aria-label="Summary metrics for this week">
              <article class="principal-summary-card card-hover" style="--fill:70%;">
                <div class="principal-summary-label">Total events (Sun‚ÄìSat)</div>
                <div class="principal-summary-value">5</div>
                <div class="principal-summary-chip">2 student-facing ¬∑ 3 family/teacher</div>
                <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
              </article>

              <article class="principal-summary-card card-hover" style="--fill:60%;">
                <div class="principal-summary-label">Evening events</div>
                <div class="principal-summary-value">3</div>
                <div class="principal-summary-chip">Within typical range</div>
                <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
              </article>

              <article class="principal-summary-card card-hover" style="--fill:45%;">
                <div class="principal-summary-label">Volunteer coverage</div>
                <div class="principal-summary-value">~65%</div>
                <div class="principal-summary-chip">2 events under 50% staffed</div>
                <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
              </article>

              <article class="principal-summary-card card-hover" style="--fill:55%;">
                <div class="principal-summary-label">Building load</div>
                <div class="principal-summary-value">Moderate</div>
                <div class="principal-summary-chip">No back-to-back late nights</div>
                <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
              </article>
              </section>

              <section class="principal-full-card" aria-label="Detailed list of this week's events">
                <article class="principal-card card-hover" id="principal-events-card">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">This week‚Äôs event roster</div>
                      <div class="principal-card-sub">Filter to see the events that need your attention.</div>
                    </div>
                    <div class="principal-small" id="principal-events-count">Showing 5 of 5 events</div>
                  </header>

                  <p class="principal-small">
                    Use the filters to focus on student-facing events, staffing needs, or evening commitments.
                  </p>

                  <table class="principal-event-table" id="principal-event-table">
                    <thead>
                      <tr>
                        <th scope="col">Event</th>
                        <th scope="col">When</th>
                        <th scope="col">Focus</th>
                        <th scope="col">Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr data-focus="family,community" data-timing="evening">
                        <td>Book Fair ‚Äî Family Night</td>
                        <td>Tue ¬∑ 5:00 ‚Äì 7:30 PM</td>
                        <td><span class="principal-event-pill">Family ¬∑ Fundraiser</span></td>
                        <td>Coverage comfortable ‚Äî confirm cash box pickup at 4:30 PM.</td>
                      </tr>
                      <tr data-focus="students" data-timing="morning">
                        <td>Walk &amp; Roll to School Day</td>
                        <td>Wed ¬∑ 7:10 ‚Äì 7:45 AM</td>
                        <td><span class="principal-event-pill">Student-facing</span></td>
                        <td>Needs two additional crosswalk adults.</td>
                      </tr>
                      <tr data-focus="staff" data-timing="schoolday">
                        <td>Teacher Snack Cart</td>
                        <td>Thu ¬∑ 8:30 ‚Äì 11:30 AM</td>
                        <td><span class="principal-event-pill">Staff support</span></td>
                        <td>Check storage space for extra donations arriving Wednesday.</td>
                      </tr>
                      <tr data-focus="students" data-timing="schoolday">
                        <td>Chess Club Tournament Practice</td>
                        <td>Thu ¬∑ 3:00 ‚Äì 4:15 PM</td>
                        <td><span class="principal-event-pill">Student enrichment</span></td>
                        <td>Confirm dismissal coverage for car-rider loop at 4:20 PM.</td>
                      </tr>
                      <tr data-focus="family,community" data-timing="evening">
                        <td>PTA Meeting &amp; Budget Q&amp;A</td>
                        <td>Tue ¬∑ 7:00 ‚Äì 8:00 PM</td>
                        <td><span class="principal-event-pill">Family ¬∑ Governance</span></td>
                        <td>Hybrid option open; watch for Zoom chat questions during finance report.</td>
                      </tr>
                    </tbody>
                  </table>

                  <p class="principal-inline-note principal-small">
                    Exporting a snapshot saves these rows so you can share them with APs or office staff.
                  </p>
                </article>
              </section>

              <section class="principal-grid-2">
                <article class="principal-card card-hover" id="principal-load-card" aria-label="Event load by weekday">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Event load by weekday</div>
                    <div class="principal-card-sub">
                      Helps avoid overloading the same night each week.
                    </div>
                  </div>
                  <div class="principal-small">This week only</div>
                </header>

                <div class="principal-week-load">
                  <div class="principal-day-col">
                    <div class="principal-day-bar-wrapper">
                      <div class="principal-day-bar" style="--height:35%;"></div>
                    </div>
                    <div class="principal-day-label">Mon</div>
                    <div class="principal-day-count">1 event</div>
                  </div>
                  <div class="principal-day-col">
                    <div class="principal-day-bar-wrapper">
                      <div class="principal-day-bar" style="--height:70%;"></div>
                    </div>
                    <div class="principal-day-label">Tue</div>
                    <div class="principal-day-count">2 events</div>
                  </div>
                  <div class="principal-day-col">
                    <div class="principal-day-bar-wrapper">
                      <div class="principal-day-bar" style="--height:35%;"></div>
                    </div>
                    <div class="principal-day-label">Wed</div>
                    <div class="principal-day-count">1 event</div>
                  </div>
                  <div class="principal-day-col">
                    <div class="principal-day-bar-wrapper">
                      <div class="principal-day-bar" style="--height:35%;"></div>
                    </div>
                    <div class="principal-day-label">Thu</div>
                    <div class="principal-day-count">1 event</div>
                  </div>
                  <div class="principal-day-col">
                    <div class="principal-day-bar-wrapper">
                      <div class="principal-day-bar" style="--height:10%; opacity:0.4;"></div>
                    </div>
                    <div class="principal-day-label">Fri</div>
                    <div class="principal-day-count">0 events</div>
                  </div>
                </div>

                <p class="principal-small" style="margin-top:0.55rem;">
                  Note: Tuesday is the busiest night (PTA Meeting + Book Fair evening). If you see more than
                  3 events on one weekday, consider spacing new requests.
                </p>
              </article>

              <article class="principal-card card-hover" id="principal-volunteer-card" aria-label="Volunteer coverage by event">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Volunteer coverage</div>
                    <div class="principal-card-sub">
                      Where the PTA could use extra staff or admin support.
                    </div>
                  </div>
                </header>

                <ul class="principal-coverage-list">
                  <li class="principal-coverage-item">
                    <span class="principal-coverage-label">Book Fair ‚Äî Family Night</span>
                    <div class="principal-coverage-meter" style="--fill:80%;">
                      <div class="principal-coverage-fill"></div>
                    </div>
                    <span class="principal-coverage-status">Comfortable</span>
                  </li>
                  <li class="principal-coverage-item">
                    <span class="principal-coverage-label">Walk &amp; Roll to School</span>
                    <div class="principal-coverage-meter" style="--fill:45%;">
                      <div class="principal-coverage-fill"></div>
                    </div>
                    <span class="principal-coverage-status">Needs 2 adults</span>
                  </li>
                  <li class="principal-coverage-item">
                    <span class="principal-coverage-label">Teacher Snack Cart</span>
                    <div class="principal-coverage-meter" style="--fill:35%;">
                      <div class="principal-coverage-fill"></div>
                    </div>
                    <span class="principal-coverage-status">Low coverage</span>
                  </li>
                  <li class="principal-coverage-item">
                    <span class="principal-coverage-label">After-school Club Support</span>
                    <div class="principal-coverage-meter" style="--fill:70%;">
                      <div class="principal-coverage-fill"></div>
                    </div>
                    <span class="principal-coverage-status">On track</span>
                  </li>
                </ul>

                <p class="principal-small" style="margin-top:0.6rem;">
                  A quick e-mail or morning announcement from the office often fills the last few
                  volunteer spots faster than another flyer.
                </p>
              </article>
            </section>

              <section class="principal-grid-3" aria-label="Parent interest and scheduling risks">
              <article class="principal-card card-hover">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Parent interest (informal signals)</div>
                    <div class="principal-card-sub">
                      Based on RSVP forms, hallway chatter, and PTA feedback ‚Äî not a formal survey.
                    </div>
                  </div>
                </header>

                <table class="principal-interest-table">
                  <thead>
                    <tr>
                      <th>Event</th>
                      <th>Signal</th>
                      <th>Note</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Fall Family Movie Night</td>
                      <td><span class="principal-interest-badge">High interest</span></td>
                      <td>Lots of ‚ÄúAre we doing this again?‚Äù comments.</td>
                    </tr>
                    <tr>
                      <td>PTA General Meeting</td>
                      <td><span class="principal-interest-badge" style="border-color:#f59e0b;color:#fed7aa;">Mixed</span></td>
                      <td>Parents prefer hybrid option &amp; shorter agenda.</td>
                    </tr>
                    <tr>
                      <td>STEM Night</td>
                      <td><span class="principal-interest-badge">High interest</span></td>
                      <td>Teachers &amp; parents excited, kids talk about it.</td>
                    </tr>
                    <tr>
                      <td>Snack Cart Drop-offs</td>
                      <td><span class="principal-interest-badge" style="border-color:#22c55e;color:#bbf7d0;">Steady</span></td>
                      <td>Low lift for families, high impact for staff.</td>
                    </tr>
                  </tbody>
                </table>

                <p class="principal-small" style="margin-top:0.6rem;">
                  High-interest events are good places to pilot new ideas ‚Äî raffles, community partners,
                  or student showcases ‚Äî because turnout is already strong.
                </p>
              </article>

              <article class="principal-card card-hover">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Scheduling &amp; fatigue watchlist</div>
                    <div class="principal-card-sub">
                      Helps prevent ‚Äútoo many nights at school in a row‚Äù for families and staff.
                    </div>
                  </div>
                </header>

                <ul class="principal-risk-list">
                  <li class="principal-risk-item">
                    <div class="principal-risk-tag-row">
                      <span>Tue evening stack</span>
                      <span class="principal-risk-level principal-risk-med">Medium</span>
                    </div>
                    <p class="principal-risk-text">
                      Book Fair evening + PTA Meeting the same night. <br />
                      ‚úÖ Acceptable this week, but keep an eye on similar patterns.
                    </p>
                  </li>
                  <li class="principal-risk-item">
                    <div class="principal-risk-tag-row">
                      <span>Staff bandwidth</span>
                      <span class="principal-risk-level principal-risk-high">Higher</span>
                    </div>
                    <p class="principal-risk-text">
                      Teacher committees also meeting this week. <br />
                      Consider PTO/PTA covering more logistics so staff can leave on time.
                    </p>
                  </li>
                  <li class="principal-risk-item">
                    <div class="principal-risk-tag-row">
                      <span>Family time balance</span>
                      <span class="principal-risk-level principal-risk-low">Low</span>
                    </div>
                    <p class="principal-risk-text">
                      No Friday events and only one late-night this week ‚Äî good for overall family balance.
                    </p>
                  </li>
                </ul>

                <p class="principal-small" style="margin-top:0.6rem;">
                  If you ever see multiple ‚ÄúHigher‚Äù risks in a week, that‚Äôs a good trigger to
                  pause new event approvals or ask PTA to regroup on timing.
                </p>
              </article>
            </section>

              <section class="principal-grid-2" aria-label="Action items and communication notes">
                <article class="principal-card card-hover">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Action items for the principal</div>
                    <div class="principal-card-sub">Quick wins that keep the week smooth.</div>
                  </div>
                </header>

                <ul class="principal-checklist">
                  <li>
                    Confirm building coverage for <strong>Friday Movie Night</strong> by looping in the evening custodian
                    team (reply-all to <a class="principal-card-link" href="mailto:operations@riverbendpta.example.org">operations@riverbendpta.example.org</a>).
                  </li>
                  <li>
                    Approve PTA table placement in the front lobby so families can check in for <strong>Walk &amp; Roll</strong>
                    and pick up reflective stickers.
                  </li>
                  <li>
                    Record a 30-second <strong>morning announcement shout-out</strong> to staff for the snack cart; PTA will
                    drop the script in your inbox by noon Tuesday.
                  </li>
                </ul>

                <p class="principal-micro-note">
                  Knock these out and volunteers can handle the rest. Each one removes a frequent ‚ÄúCan we get approval?‚Äù
                  e-mail.
                </p>
              </article>

              <article class="principal-card card-hover">
                <header class="principal-card-header">
                  <div>
                    <div class="principal-card-title">Communications &amp; facilities notes</div>
                    <div class="principal-card-sub">What the office team should know for newsletters and setups.</div>
                  </div>
                </header>

                <ul class="principal-checklist">
                  <li>
                    Add the <strong>Giving Tree kickoff</strong> to next week‚Äôs family newsletter with drop-off instructions and
                    counselor contact info.
                  </li>
                  <li>
                    Ensure <strong>gym floor covering</strong> is scheduled for Movie Night (submit request via
                    <a class="principal-card-link" href="https://district.example.org/facilities" target="_blank" rel="noopener">district facilities portal</a>).
                  </li>
                  <li>
                    Share <strong>bus loop reminder</strong> with staff: Walk &amp; Roll groups will use the main sidewalk so buses
                    should unload 5 minutes early on Wednesday.
                  </li>
                </ul>

                <p class="principal-micro-note">
                  PTA comms lead <a class="principal-card-link" href="mailto:vp.riverbendpta@example.org">vp.riverbendpta@example.org</a>
                  is ready to plug these into templates once you give the thumbs up.
                </p>
                </article>
              </section>
            </div>

            <div class="principal-panel" data-panel="next-30" id="principal-panel-next-30">
              <section class="principal-summary-grid" aria-label="Summary metrics for the next 30 days">
                <article class="principal-summary-card card-hover" style="--fill:65%;">
                  <div class="principal-summary-label">Total PTA touchpoints (30 days)</div>
                  <div class="principal-summary-value">18</div>
                  <div class="principal-summary-chip">7 evening commitments</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:52%;">
                  <div class="principal-summary-label">High-demand nights</div>
                  <div class="principal-summary-value">4</div>
                  <div class="principal-summary-chip">Watch Oct 17 ¬∑ Nov 1</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:58%;">
                  <div class="principal-summary-label">Volunteer commitments</div>
                  <div class="principal-summary-value">82</div>
                  <div class="principal-summary-chip">Goal: 95 pledged</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:62%;">
                  <div class="principal-summary-label">Budget impact</div>
                  <div class="principal-summary-value">$6.4K</div>
                  <div class="principal-summary-chip">Book Fair + Giving Tree</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>
              </section>

              <section class="principal-grid-2" aria-label="Upcoming calendar and approvals">
                <article class="principal-card card-hover" id="principal-next30-calendar">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Next 30-day calendar highlights</div>
                      <div class="principal-card-sub">Key events that impact building use and staffing.</div>
                    </div>
                  </header>

                  <table class="principal-event-table" id="principal-next30-table">
                    <thead>
                      <tr>
                        <th scope="col">Event</th>
                        <th scope="col">Date &amp; time</th>
                        <th scope="col">Focus</th>
                        <th scope="col">Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>STEM Night</td>
                        <td>Thu, Nov 7 ¬∑ 6:00 ‚Äì 8:00 PM</td>
                        <td><span class="principal-event-pill">Family ¬∑ STEM</span></td>
                        <td>Finalize custodial overtime request by Oct 28.</td>
                      </tr>
                      <tr>
                        <td>Community Garden Clean-Up</td>
                        <td>Sat, Nov 9 ¬∑ 9:00 ‚Äì 11:30 AM</td>
                        <td><span class="principal-event-pill">Community</span></td>
                        <td>Order mulch delivery for Nov 8 (PTA covers cost).</td>
                      </tr>
                      <tr>
                        <td>Holiday Giving Tree Kickoff</td>
                        <td>Nov 4 ‚Äì Nov 15</td>
                        <td><span class="principal-event-pill">Community care</span></td>
                        <td>Counselors confirming 12 families receiving support.</td>
                      </tr>
                      <tr>
                        <td>Teacher Conference Meals</td>
                        <td>Nov 18 ‚Äì Nov 20</td>
                        <td><span class="principal-event-pill">Staff support</span></td>
                        <td>Catering deposit due Nov 8; confirm dietary list.</td>
                      </tr>
                      <tr>
                        <td>Winter Concert Support</td>
                        <td>Tue, Dec 3 ¬∑ 5:30 ‚Äì 8:30 PM</td>
                        <td><span class="principal-event-pill">Students &amp; families</span></td>
                        <td>Need ushers + sound volunteer assigned by Nov 20.</td>
                      </tr>
                    </tbody>
                  </table>

                  <p class="principal-small principal-inline-note">
                    Dates include district non-school days so you can plan custodial coverage and HVAC schedules.
                  </p>
                </article>

                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Upcoming approvals &amp; deadlines</div>
                      <div class="principal-card-sub">Handle these early to avoid last-minute scrambles.</div>
                    </div>
                  </header>

                  <ul class="principal-checklist">
                    <li>Approve STEM Night vendor list (electric + robotics) by <strong>Oct 18</strong>.</li>
                    <li>Confirm gym access for the <strong>Nov 9 Garden Clean-Up</strong> rain plan.</li>
                    <li>Sign updated facilities agreement for <strong>Winter Concert</strong> stage lighting by Oct 30.</li>
                    <li>Review PTA reimbursement batch scheduled for <strong>Nov 12</strong> (Book Fair expenses).</li>
                  </ul>

                  <p class="principal-micro-note">
                    Once these approvals are logged, PTA officers can finalize communication and volunteer pushes.
                  </p>
                </article>
              </section>

              <section class="principal-grid-2" aria-label="Logistics and volunteer planning for next 30 days">
                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Logistics watchlist (30 days)</div>
                      <div class="principal-card-sub">Spot friction points before they become emergencies.</div>
                    </div>
                  </header>

                  <ul class="principal-risk-list">
                    <li class="principal-risk-item">
                      <div class="principal-risk-tag-row">
                        <span>STEM Night exhibits</span>
                        <span class="principal-risk-level principal-risk-med">Medium</span>
                      </div>
                      <p class="principal-risk-text">Need final electricity map from vendors ‚Äî PTA following up by Oct 21.</p>
                    </li>
                    <li class="principal-risk-item">
                      <div class="principal-risk-tag-row">
                        <span>Giving Tree storage</span>
                        <span class="principal-risk-level principal-risk-low">Low</span>
                      </div>
                      <p class="principal-risk-text">Stage closet reserved; request custodial key access for counselors.</p>
                    </li>
                    <li class="principal-risk-item">
                      <div class="principal-risk-tag-row">
                        <span>Winter concert load-out</span>
                        <span class="principal-risk-level principal-risk-med">Medium</span>
                      </div>
                      <p class="principal-risk-text">Coordinate custodians for chair reset by 8:30 PM on Dec 3.</p>
                    </li>
                  </ul>

                  <p class="principal-small principal-inline-note">
                    Invite AP Turner to the Nov 1 planning check-in so decisions can be made on the spot.
                  </p>
                </article>

                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Volunteer pipeline</div>
                      <div class="principal-card-sub">Where PTA still needs a principal signal boost.</div>
                    </div>
                  </header>

                  <ul class="principal-checklist">
                    <li><strong>STEM Night</strong> ‚Äî 6 of 10 classroom hosts confirmed; highlight during staff meeting.</li>
                    <li><strong>Conference Meals</strong> ‚Äî catering covered, but need 4 dessert drop-offs (ask 4th grade families).</li>
                    <li><strong>Garden Clean-Up</strong> ‚Äî scouts partnering; principal shout-out could add family turnout.</li>
                    <li><strong>Winter Concert</strong> ‚Äî seek 2 bilingual greeters for newcomer families.</li>
                  </ul>

                  <p class="principal-micro-note">
                    A single paragraph in the Sunday family message typically fills these remaining slots.</p>
                </article>
              </section>
            </div>

            <div class="principal-panel" data-panel="by-grade" id="principal-panel-by-grade">
              <section class="principal-summary-grid" aria-label="Summary metrics by grade level">
                <article class="principal-summary-card card-hover" style="--fill:68%;">
                  <div class="principal-summary-label">Grades engaged this month</div>
                  <div class="principal-summary-value">6</div>
                  <div class="principal-summary-chip">Every grade has an event touchpoint</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:54%;">
                  <div class="principal-summary-label">Highest need grade</div>
                  <div class="principal-summary-value">3rd grade</div>
                  <div class="principal-summary-chip">STEM presenters running low</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:60%;">
                  <div class="principal-summary-label">Shared opportunities</div>
                  <div class="principal-summary-value">4</div>
                  <div class="principal-summary-chip">Cross-grade family events</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>

                <article class="principal-summary-card card-hover" style="--fill:48%;">
                  <div class="principal-summary-label">Open classroom requests</div>
                  <div class="principal-summary-value">8</div>
                  <div class="principal-summary-chip">Focus on K‚Äì1 classroom support</div>
                  <div class="principal-summary-bar"><div class="principal-summary-bar-fill"></div></div>
                </article>
              </section>

              <section class="principal-grid-2" aria-label="Grade-level focus overview">
                <article class="principal-card card-hover" id="principal-grade-table-card">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Grade-level spotlights</div>
                      <div class="principal-card-sub">Where PTA is partnering directly with each grade.</div>
                    </div>
                  </header>

                  <table class="principal-event-table" id="principal-grade-table">
                    <thead>
                      <tr>
                        <th scope="col">Grade</th>
                        <th scope="col">Upcoming highlight</th>
                        <th scope="col">PTA lead</th>
                        <th scope="col">Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>K</td>
                        <td>Playground refresh helpers ¬∑ Oct 18</td>
                        <td>Volunteer Chair</td>
                        <td>Need 2 more adults for paint touch-ups.</td>
                      </tr>
                      <tr>
                        <td>1st</td>
                        <td>Reading Buddies kickoff ¬∑ Oct 24</td>
                        <td>Teacher Liaison</td>
                        <td>Principal welcome video requested for families.</td>
                      </tr>
                      <tr>
                        <td>2nd</td>
                        <td>Science lab docents ¬∑ Oct 30</td>
                        <td>STEM Night Lead</td>
                        <td>Safety glasses inventory complete; confirm parent training slides.</td>
                      </tr>
                      <tr>
                        <td>3rd</td>
                        <td>STEM Night presenters ¬∑ Nov 7</td>
                        <td>VP Programs</td>
                        <td>Short 3 presenters ‚Äî ask classroom teachers for referrals.</td>
                      </tr>
                      <tr>
                        <td>4th</td>
                        <td>Walk &amp; Roll route leaders ¬∑ Nov 6</td>
                        <td>Safety Chair</td>
                        <td>Staffing strong; send thank-you note post-event.</td>
                      </tr>
                      <tr>
                        <td>5th</td>
                        <td>Safety patrol breakfast ¬∑ Nov 15</td>
                        <td>Treasurer</td>
                        <td>Awaiting principal approval for early cafeteria access.</td>
                      </tr>
                    </tbody>
                  </table>
                </article>

                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Support requests by grade</div>
                      <div class="principal-card-sub">Quick wins that remove classroom friction.</div>
                    </div>
                  </header>

                  <ul class="principal-checklist">
                    <li><strong>K</strong> ‚Äî request 2 lunch buddies for Oct 23 (introduce car-line volunteers).</li>
                    <li><strong>1st</strong> ‚Äî need Spanish translation of Reading Buddies flyer.</li>
                    <li><strong>2nd</strong> ‚Äî confirm science lab doors unlocked by 7:45 AM on Oct 30.</li>
                    <li><strong>3rd</strong> ‚Äî principal shout-out in newsletter for STEM presenters.</li>
                    <li><strong>5th</strong> ‚Äî approve PA system use for safety patrol breakfast announcements.</li>
                  </ul>

                  <p class="principal-micro-note">
                    These items align with SIP goals around literacy and family engagement ‚Äî easy wins to highlight in reports.
                  </p>
                </article>
              </section>

              <section class="principal-grid-2" aria-label="Cross-grade opportunities and family engagement">
                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Cross-grade opportunities</div>
                      <div class="principal-card-sub">Pair older helpers with younger grades for stronger turnout.</div>
                    </div>
                  </header>

                  <ul class="principal-checklist">
                    <li><strong>Buddy reading</strong> ‚Äî 5th grade can rotate through 1st grade classes during conference week.</li>
                    <li><strong>Garden clean-up</strong> ‚Äî Suggest 2nd + 4th grade combo teams for tool sharing.</li>
                    <li><strong>Spirit assemblies</strong> ‚Äî Invite 3rd grade to host November assembly with student council.</li>
                    <li><strong>STEM Night welcome crew</strong> ‚Äî pair kindergarten families with 5th grade ambassadors.</li>
                  </ul>

                  <p class="principal-micro-note">
                    Announce these pairings during the Oct 21 staff huddle so teachers can prep students.</p>
                </article>

                <article class="principal-card card-hover">
                  <header class="principal-card-header">
                    <div>
                      <div class="principal-card-title">Family engagement notes</div>
                      <div class="principal-card-sub">Signals from grade-level liaisons and PTA feedback forms.</div>
                    </div>
                  </header>

                  <ul class="principal-checklist">
                    <li>3rd grade families asking for more hands-on STEM previews ‚Äî PTA filming lab teaser.</li>
                    <li>1st grade prefer earlier volunteer sign-ups; send November sheet by Oct 15.</li>
                    <li>5th grade parents offered to lead secondary transition Q&amp;A in December.</li>
                    <li>Kindergarten appreciates clear parking instructions; share map again week of Oct 16.</li>
                  </ul>

                  <p class="principal-micro-note">
                    Sharing these quick notes in your staff newsletter keeps teachers aligned with PTA messaging.</p>
                </article>
              </section>
            </div>
          </main>
        </div>
      </section>

      <!-- ================= PTA BOARD VIEW ================= -->
      <section id="pta-board-view" class="view board-root">
        <div class="board-shell">
          <header class="board-header">
            <div class="board-title-block">
              <div class="board-kicker">PTA Leadership</div>
              <h1 class="board-title">Board, meetings, and key documents.</h1>
              <p class="board-sub">
                A clear overview of who‚Äôs serving this year, when the board meets,
                and where to find bylaws and minutes ‚Äî so families always know
                how decisions are made.
              </p>
            </div>
            <div>
              <div class="board-badge">
                ‚úÖ Transparent ¬∑ Organized ¬∑ Parent-led
              </div>
            </div>
          </header>

          <section class="board-layout">
            <div>
              <h2 class="board-section-title">2024‚Äì2025 PTA Board</h2>
              <p class="board-section-sub">
                All positions are volunteer roles. You can contact any officer with questions
                or ideas ‚Äî they‚Äôre here to represent families and support the school.
              </p>

              <div class="board-officers-grid fade-seq">
                <article class="board-card card-hover">
                  <div class="board-role">President</div>
                  <div class="board-name">Alex Johnson</div>
                  <div class="board-contact">üìß president.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Agenda &amp; priorities</span>
                    <span class="board-tag-pill">Principal liaison</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Vice President</div>
                  <div class="board-name">Maria Lopez</div>
                  <div class="board-contact">üìß vp.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Events support</span>
                    <span class="board-tag-pill">Volunteer teams</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Treasurer</div>
                  <div class="board-name">Jordan Kim</div>
                  <div class="board-contact">üìß treasurer.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Budget &amp; reports</span>
                    <span class="board-tag-pill">Fundraisers</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Secretary</div>
                  <div class="board-name">Priya Patel</div>
                  <div class="board-contact">üìß secretary.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Minutes</span>
                    <span class="board-tag-pill">Bylaws &amp; records</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Volunteer Chair</div>
                  <div class="board-name">Taylor Brooks</div>
                  <div class="board-contact">üìß volunteers.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Sign-ups</span>
                    <span class="board-tag-pill">Room parents</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Teacher Liaison</div>
                  <div class="board-name">Ms. Lacey Reed</div>
                  <div class="board-contact">üìß lacey.reed@riverbendpta.example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Staff voice</span>
                    <span class="board-tag-pill">Classroom needs</span>
                  </div>
                </article>

                <article class="board-card card-hover">
                  <div class="board-role">Fundraising Chair</div>
                  <div class="board-name">Chris Alvarez</div>
                  <div class="board-contact">üìß fundraising.riverbendpta@example.org</div>
                  <div class="board-focus-tags">
                    <span class="board-tag-pill">Community partners</span>
                    <span class="board-tag-pill">Grants</span>
                  </div>
                </article>
              </div>
            </div>

            <aside class="board-meeting-card card-hover">
              <h2 class="board-section-title">Board meetings</h2>
              <div class="board-meeting-row">
                <strong>Schedule:</strong> 1st Tuesday of each month, 6:30‚Äì8:00 PM
              </div>
              <div class="board-meeting-row">
                <strong>Location:</strong> Media Center (hybrid option via Zoom when noted)
              </div>
              <div class="board-meeting-row">
                <strong>Who may attend:</strong> All interested parents, guardians, staff, and community members.
              </div>
              <p class="board-meeting-note">
                Time is reserved at the start of each meeting for questions and ideas from families.
                You do not need to be a ‚Äúmember‚Äù to listen in.
              </p>
            </aside>
          </section>

          <section class="board-docs-layout">
            <div>
              <h2 class="board-section-title">Bylaws &amp; key documents</h2>
              <p class="board-section-sub">
                These documents guide how the PTA operates. For official copies, please contact the Secretary.
              </p>

              <table class="board-table">
                <thead>
                  <tr>
                    <th>Document</th>
                    <th>Last updated</th>
                    <th>Type</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a href="#doc-bylaws" class="board-doc-link">PTA Bylaws (current)</a></td>
                    <td>August 2024</td>
                    <td><span class="board-doc-pill">Bylaws</span></td>
                  </tr>
                  <tr>
                    <td><a href="#doc-budget" class="board-doc-link">2024‚Äì2025 Budget Overview</a></td>
                    <td>September 2024</td>
                    <td><span class="board-doc-pill">Finance</span></td>
                  </tr>
                  <tr>
                    <td><a href="#doc-minutes-sept" class="board-doc-link">September Meeting Minutes</a></td>
                    <td>September 10, 2024</td>
                    <td><span class="board-doc-pill">Minutes</span></td>
                  </tr>
                  <tr>
                    <td><a href="#doc-minutes-oct" class="board-doc-link">October Meeting Minutes</a></td>
                    <td>October 8, 2024</td>
                    <td><span class="board-doc-pill">Minutes</span></td>
                  </tr>
                  <tr>
                    <td><a href="#doc-audit" class="board-doc-link">Annual Financial Review Summary</a></td>
                    <td>July 2024</td>
                    <td><span class="board-doc-pill">Finance</span></td>
                  </tr>
                  <tr>
                    <td><a href="#doc-volunteer-handbook" class="board-doc-link">Volunteer Handbook</a></td>
                    <td>October 2024</td>
                    <td><span class="board-doc-pill">Reference</span></td>
                  </tr>
                </tbody>
              </table>

              <div class="board-doc-detail card-hover" id="doc-bylaws">
                <h3>PTA Bylaws (current)</h3>
                <p>Defines officer roles, meeting procedures, and how funds are approved.</p>
                <ul>
                  <li>Download: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/bylaws.pdf" target="_blank" rel="noopener">bylaws.pdf</a></li>
                  <li>Summary one-pager for quick reference: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/bylaws-cheatsheet.pdf" target="_blank" rel="noopener">cheatsheet</a></li>
                </ul>
              </div>

              <div class="board-doc-detail card-hover" id="doc-budget">
                <h3>2024‚Äì2025 Budget Overview</h3>
                <p>Shows projected income and expenses by category along with year-to-date actuals.</p>
                <ul>
                  <li>View spreadsheet: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/budget.xlsx" target="_blank" rel="noopener">budget.xlsx</a></li>
                  <li>Questions? E-mail <a class="portal-inline-link" href="mailto:treasurer.riverbendpta@example.org">treasurer.riverbendpta@example.org</a></li>
                </ul>
              </div>

              <div class="board-doc-detail card-hover" id="doc-minutes-sept">
                <h3>September Meeting Minutes</h3>
                <p>Approved during the October board meeting.</p>
                <ul>
                  <li>Download minutes: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/minutes-sept.pdf" target="_blank" rel="noopener">minutes-sept.pdf</a></li>
                  <li>Key votes: Movie Night budget increase, STEM Night co-lead approval.</li>
                </ul>
              </div>

              <div class="board-doc-detail card-hover" id="doc-minutes-oct">
                <h3>October Meeting Minutes</h3>
                <p>Draft shared for transparency; official approval happens at the November meeting.</p>
                <ul>
                  <li>Draft minutes: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/minutes-oct-draft.pdf" target="_blank" rel="noopener">minutes-oct-draft.pdf</a></li>
                  <li>Includes volunteer recognition list and fundraising progress chart.</li>
                </ul>
              </div>

              <div class="board-doc-detail card-hover" id="doc-audit">
                <h3>Annual Financial Review Summary</h3>
                <p>Independent audit verifying that income and expenses matched bank statements for 2023‚Äì2024.</p>
                <ul>
                  <li>Summary PDF: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/financial-review.pdf" target="_blank" rel="noopener">financial-review.pdf</a></li>
                  <li>Contact the audit committee at <a class="portal-inline-link" href="mailto:audit@riverbendpta.example.org">audit@riverbendpta.example.org</a></li>
                </ul>
              </div>

              <div class="board-doc-detail card-hover" id="doc-volunteer-handbook">
                <h3>Volunteer Handbook</h3>
                <p>A quick guide for new volunteers covering sign-in procedures, background checks, and event expectations.</p>
                <ul>
                  <li>Handbook PDF: <a class="portal-inline-link" href="https://riverbendpta.example.org/docs/volunteer-handbook.pdf" target="_blank" rel="noopener">volunteer-handbook.pdf</a></li>
                  <li>Printed copies available in the front office near the PTA mailbox.</li>
                </ul>
              </div>
            </div>

            <aside class="board-quick-card card-hover">
              <h2 class="board-section-title">How families can get involved in decisions</h2>
              <ul class="board-quick-list">
                <li>Attend at least one board or general meeting this year to see how things work.</li>
                <li>E-mail the President or any officer if you have a concern or idea for an event.</li>
                <li>Review bylaws and budget summary before the annual voting meeting.</li>
                <li>Join a short-term committee (for example, Movie Night, STEM Night, Book Fair).</li>
              </ul>
              <p style="font-size:0.78rem; color:#4b5563;">
                The goal is for PTA decisions to feel open, understandable, and collaborative ‚Äî
                never like they‚Äôre happening ‚Äúbehind closed doors.‚Äù
              </p>
            </aside>
          </section>

          <section class="board-section" aria-label="PTA resource library" style="margin-top:2rem;">
            <h2 class="board-section-title">Resource library for board &amp; committee leads</h2>
            <p class="board-section-sub">
              These quick links keep everyone on the same page ‚Äî share them with committee co-leads and room parents.
            </p>

            <div class="board-resource-grid fade-seq">
              <article class="board-resource-card card-hover">
                <strong>Grants &amp; sponsorship tracker</strong>
                <p>Live spreadsheet of pending business partnerships, district grants, and deadlines.</p>
                <a href="https://riverbendpta.example.org/resources/grants-tracker" target="_blank" rel="noopener">Open tracker</a>
              </article>

              <article class="board-resource-card card-hover">
                <strong>Communications toolkit</strong>
                <p>Templates for flyers, social posts, and morning announcements. Includes brand colors and logos.</p>
                <a href="https://riverbendpta.example.org/resources/comms-kit.zip" target="_blank" rel="noopener">Download toolkit</a>
              </article>

              <article class="board-resource-card card-hover">
                <strong>Room parent starter pack</strong>
                <p>Sample e-mails, budget request form, and timeline for fall and spring classroom events.</p>
                <a href="https://riverbendpta.example.org/resources/room-parent-pack.pdf" target="_blank" rel="noopener">View starter pack</a>
              </article>
            </div>
          </section>
        </div>
      </section>

      <!-- ================= STUDENT VIEW ================= -->
      <section id="student-view" class="view student-root">
        <div class="student-shell">
          <header class="student-header">
            <div class="student-kicker">For Students</div>
            <h1 class="student-title">
              What‚Äôs happening at <span>our school</span> this week? üéâ
            </h1>
            <p class="student-sub">
              This page is just for you. See the fun stuff that‚Äôs coming up and how you can join in.
            </p>
          </header>

          <section class="student-grid fade-seq">
            <article class="student-card card-hover">
              <div class="student-card-title">
                <span class="student-emoji">üìÖ</span>
                This week‚Äôs fun things
              </div>
              <ul class="student-list">
                <li>
                  <strong>Book Fair Night</strong>
                  <span class="student-badge green">Today</span>
                  <br />
                  Come to the library with your grown-ups to look at books.
                  You can help pick classroom books from your teacher‚Äôs wish list.
                </li>
                <li>
                  <strong>Walk &amp; Roll to School</strong>
                  <span class="student-badge">Morning</span>
                  <br />
                  Meet other students and walk in together from the front parking lot.
                  Scooters and strollers are okay ‚Äî just listen to the helpers.
                </li>
                <li>
                  <strong>Teacher Snack Cart</strong>
                  <br />
                  The PTA is surprising teachers with snacks.
                  If you see the cart, you can say ‚ÄúThanks for teaching us!‚Äù üßÉ
                </li>
                <li>
                  <strong>Chess Club Practice</strong>
                  <span class="student-badge">After school</span>
                  <br />
                  Meet in the Innovation Lab on Thursday. Bring a water bottle and practice matches your best moves.
                </li>
                <li>
                  <strong>Spirit Wear Friday</strong>
                  <span class="student-badge">All day</span>
                  <br />
                  Wear your Riverbend colors or favorite school shirt to earn house points for your class.
                </li>
              </ul>
            </article>

            <article class="student-card card-hover">
              <div class="student-card-title">
                <span class="student-emoji">üëÄ</span>
                Coming up soon
              </div>
              <ul class="student-list">
                <li>
                  <strong>Family Movie Night</strong>
                  <br />
                  Wear comfy clothes, bring a blanket, and watch a movie in the gym.
                  You must come with a grown-up.
                </li>
                <li>
                  <strong>STEM Night</strong>
                  <br />
                  Try science and tech stations around the school.
                  You can show your family the projects you‚Äôve been working on.
                </li>
                <li>
                  <strong>Winter Concert &amp; Art Walk</strong>
                  <br />
                  Sing, play instruments, or show your artwork on the walls.
                  Dates will be announced in class and here.
                </li>
                <li>
                  <strong>Holiday Giving Tree</strong>
                  <br />
                  Choose an ornament with a wish list item to help a Riverbend family. Bring gifts back by November 15.
                </li>
                <li>
                  <strong>Garden Clean-Up Day</strong>
                  <br />
                  Help plant bulbs and pull weeds with your family on Saturday, November 9. Gloves provided!
                </li>
              </ul>
            </article>

            <article class="student-card card-hover">
              <div class="student-card-title">
                <span class="student-emoji">‚úÖ</span>
                Before you go
              </div>
              <ul class="student-checklist">
                <li>Ask a grown-up who is picking you up after the event and where to meet them.</li>
                <li>Pack a labeled water bottle and jacket in case the gym or playground feels chilly.</li>
                <li>Charge your Chromebook if you need it for STEM Night stations or homework afterward.</li>
              </ul>
              <p style="margin-top:0.6rem; font-size:0.82rem; color:#4b5563;">
                Need help? Use the <a class="portal-inline-link" href="https://riverbendpta.example.org/students/help" target="_blank" rel="noopener">student help form</a>
                and a counselor or PTA volunteer will follow up.
              </p>
            </article>
          </section>

          <section class="student-tips card-hover">
            <strong>How to be ready for events ‚≠ê</strong>
            <ul class="student-tips-list">
              <li>Ask your grown-up which events you might go to this week.</li>
              <li>Check what you should wear (comfy clothes, school spirit shirt, etc.).</li>
              <li>If you‚Äôre nervous, bring a friend or ask a teacher where to go.</li>
              <li>Say ‚Äúthank you‚Äù to the helpers ‚Äî most of them are parents volunteering their time.</li>
              <li>Pack a small snack or water bottle if the event happens right after school.</li>
              <li>Look at the weather so you know if you need a jacket or umbrella.</li>
            </ul>
          </section>

          <div class="student-link-grid fade-seq">
            <article class="student-link-card card-hover">
              <strong>Morning announcements replay</strong>
              <p>Catch up if you missed the news crew. New episodes post by 4:00 PM each day.</p>
              <a href="https://riverbendpta.example.org/students/announcements" target="_blank" rel="noopener">Listen online</a>
            </article>

            <article class="student-link-card card-hover">
              <strong>Clubs &amp; activities schedule</strong>
              <p>See which clubs meet on which days plus pick-up locations for families.</p>
              <a href="https://riverbendpta.example.org/students/clubs" target="_blank" rel="noopener">View schedule</a>
            </article>

            <article class="student-link-card card-hover">
              <strong>Spirit wear shop</strong>
              <p>Order school shirts and hoodies so you‚Äôre ready for Spirit Fridays.</p>
              <a href="https://riverbendpta.example.org/shop" target="_blank" rel="noopener">Visit the shop</a>
            </article>
          </div>

          <p class="student-footer-note">
            If you‚Äôre not sure about any event, just ask your teacher or grown-up and they can
            check the family page for more details. üí¨
          </p>
        </div>
      </section>
    </main>
  </div>

  <script>
    // --- Global view toggle ---
    const viewButtons = document.querySelectorAll(".view-toggle-btn");
    const views = document.querySelectorAll(".view");

    viewButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const targetId = btn.getAttribute("data-view-target");

        viewButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        views.forEach(v => {
          v.classList.toggle("active", v.id === targetId);
        });

        if (targetId === "principal-view") {
          document.body.style.background = "#020617";
          document.body.style.color = "#e5e7eb";
        } else if (targetId === "student-view") {
          document.body.style.background =
            "radial-gradient(circle at top, #e0f2fe 0, #f9fafb 38%, #fef3c7 100%)";
          document.body.style.color = "#111827";
        } else {
          document.body.style.background = "#f3f4f6";
          document.body.style.color = "#111827";
        }
      });
    });

    // --- Family view date + year ---
    const familyTodayElem = document.getElementById("family-today-date");
    const familyYearElem = document.getElementById("family-year");
    const now = new Date();
    const dateOptions = { weekday: "long", month: "long", day: "numeric" };
    if (familyTodayElem) familyTodayElem.textContent = now.toLocaleDateString(undefined, dateOptions);
    if (familyYearElem) familyYearElem.textContent = now.getFullYear();

    // --- Principal header + panels ---
    const principalKicker = document.getElementById("principal-view-kicker");
    const principalTitle = document.getElementById("principal-view-title");
    const principalSub = document.getElementById("principal-view-sub");
    const principalDatePill = document.getElementById("principal-date-pill");
    const principalStatusMessage = document.getElementById("principal-status-message");
    const principalPanels = document.querySelectorAll(".principal-panel");
    const principalPanelButtons = document.querySelectorAll("[data-panel-target]");
    const principalQuickButtons = document.querySelectorAll("[data-panel-force]");
    const principalEventsRows = Array.from(document.querySelectorAll("#principal-event-table tbody tr"));
    const principalEventsCount = document.getElementById("principal-events-count");
    const principalFilterBtn = document.getElementById("principal-filter-btn");
    const principalFilterOverlay = document.getElementById("principal-filter-overlay");
    const principalFilterForm = document.getElementById("principal-filter-form");
    const principalFilterClose = document.getElementById("principal-filter-close");
    const principalFilterReset = document.getElementById("principal-filter-reset");
    const principalExportBtn = document.getElementById("principal-export-btn");
    const principalDateFormatter = new Intl.DateTimeFormat(undefined, { month: "short", day: "numeric" });
    const monday = new Date(now);
    const day = now.getDay();
    const diffToMonday = (day === 0 ? -6 : 1) - day;
    monday.setDate(now.getDate() + diffToMonday);
    const thisWeekLabel = "Week of " + principalDateFormatter.format(monday);
    const rangeStart = new Date(now);
    const rangeEnd = new Date(now);
    rangeEnd.setDate(now.getDate() + 30);
    const thirtyDayLabel =
      principalDateFormatter.format(rangeStart) + " ‚Äì " + principalDateFormatter.format(rangeEnd);
    const principalPanelCopy = {
      "this-week": {
        kicker: "This Week ¬∑ Snapshot",
        title: "PTA events and building impact",
        sub:
          "Current week overview. Green means comfortably covered, orange needs a second look, red means something may need to move or get extra support.",
        label: "this week"
      },
      "next-30": {
        kicker: "Next 30 days ¬∑ Planning view",
        title: "Upcoming PTA schedule and approvals",
        sub:
          "Preview volunteer needs, building usage, and approvals coming due so you can plan ahead.",
        label: "the next 30 days"
      },
      "by-grade": {
        kicker: "By grade level ¬∑ Coverage",
        title: "Grade-level partnerships at a glance",
        sub:
          "See which grades have events, requests, and cross-grade opportunities so you can balance support.",
        label: "grade-level coverage"
      }
    };
    const principalDateLabels = {
      "this-week": thisWeekLabel,
      "next-30": thirtyDayLabel,
      "by-grade": "Grades K‚Äì5 overview"
    };
    const defaultFocus = ["family", "staff", "students", "community"];
    const defaultTiming = ["morning", "schoolday", "evening"];
    const filterState = {
      focus: new Set(defaultFocus),
      timing: new Set(defaultTiming)
    };
    let principalStatusTimer;
    let activePanelId = "this-week";

    function setPrincipalStatus(message) {
      if (!principalStatusMessage) return;
      clearTimeout(principalStatusTimer);
      if (message) {
        principalStatusMessage.textContent = message;
        principalStatusMessage.classList.add("is-visible");
        principalStatusTimer = setTimeout(() => {
          principalStatusMessage.classList.remove("is-visible");
        }, 6000);
      } else {
        principalStatusMessage.textContent = "";
        principalStatusMessage.classList.remove("is-visible");
      }
    }

    function setsMatch(set, values) {
      if (set.size !== values.length) return false;
      return values.every(value => set.has(value));
    }

    function updateFilterButtonState() {
      if (!principalFilterBtn) return;
      const atDefault =
        setsMatch(filterState.focus, defaultFocus) && setsMatch(filterState.timing, defaultTiming);
      principalFilterBtn.classList.toggle("filters-active", !atDefault);
    }

    function syncFilterForm() {
      if (!principalFilterForm) return;
      const checkboxes = principalFilterForm.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(box => {
        if (box.name === "focus") {
          box.checked = filterState.focus.has(box.value);
        } else if (box.name === "timing") {
          box.checked = filterState.timing.has(box.value);
        }
      });
    }

    function applyPrincipalFilters() {
      if (!principalEventsRows.length) return 0;
      let visible = 0;
      principalEventsRows.forEach(row => {
        const focusTags = row.dataset.focus ? row.dataset.focus.split(",").map(tag => tag.trim()) : [];
        const timingTag = row.dataset.timing;
        const focusMatch = focusTags.some(tag => filterState.focus.has(tag));
        const timingMatch = filterState.timing.has(timingTag);
        const show = focusMatch && timingMatch;
        row.classList.toggle("is-hidden", !show);
        if (show) visible += 1;
      });
      if (principalEventsCount) {
        principalEventsCount.textContent = `Showing ${visible} of ${principalEventsRows.length} events`;
      }
      return visible;
    }

    function activatePrincipalPanel(panelId) {
      if (!panelId) return;
      activePanelId = panelId;
      principalPanels.forEach(panel => {
        panel.classList.toggle("active", panel.dataset.panel === panelId);
      });
      principalPanelButtons.forEach(btn => {
        const isActive = btn.getAttribute("data-panel-target") === panelId;
        btn.classList.toggle("active", isActive);
        btn.setAttribute("aria-pressed", String(isActive));
      });
      const copy = principalPanelCopy[panelId];
      if (copy) {
        if (principalKicker) principalKicker.textContent = copy.kicker;
        if (principalTitle) principalTitle.textContent = copy.title;
        if (principalSub) principalSub.textContent = copy.sub;
      }
      const labelText = principalDateLabels[panelId];
      if (principalDatePill && labelText) {
        principalDatePill.textContent = labelText;
      }
      if (panelId === "this-week") {
        const visible = applyPrincipalFilters();
        setPrincipalStatus(`Showing ${visible} of ${principalEventsRows.length} events this week.`);
      } else {
        setPrincipalStatus("");
      }
    }

    principalPanelButtons.forEach(btn => {
      btn.addEventListener("click", () => activatePrincipalPanel(btn.getAttribute("data-panel-target")));
    });

    function openFilterOverlay() {
      if (!principalFilterOverlay) return;
      principalFilterOverlay.hidden = false;
      principalFilterOverlay.classList.add("active");
      document.body.classList.add("prevent-scroll");
      if (principalFilterBtn) principalFilterBtn.setAttribute("aria-expanded", "true");
      syncFilterForm();
      const firstInput = principalFilterOverlay.querySelector("input");
      if (firstInput) firstInput.focus();
    }

    function closeFilterOverlay() {
      if (!principalFilterOverlay) return;
      principalFilterOverlay.classList.remove("active");
      principalFilterOverlay.hidden = true;
      document.body.classList.remove("prevent-scroll");
      if (principalFilterBtn) {
        principalFilterBtn.setAttribute("aria-expanded", "false");
        principalFilterBtn.focus();
      }
    }

    function setPrincipalFilters({ focus, timing, announce }) {
      if (focus && focus.length) {
        filterState.focus = new Set(focus);
      }
      if (timing && timing.length) {
        filterState.timing = new Set(timing);
      }
      const visible = applyPrincipalFilters();
      updateFilterButtonState();
      syncFilterForm();
      if (announce) {
        setPrincipalStatus(announce);
      } else {
        setPrincipalStatus(`Showing ${visible} of ${principalEventsRows.length} events this week.`);
      }
    }

    if (principalFilterBtn) {
      principalFilterBtn.addEventListener("click", () => openFilterOverlay());
    }

    if (principalFilterClose) {
      principalFilterClose.addEventListener("click", () => closeFilterOverlay());
    }

    if (principalFilterOverlay) {
      principalFilterOverlay.addEventListener("click", evt => {
        if (evt.target === principalFilterOverlay) {
          closeFilterOverlay();
        }
      });
    }

    document.addEventListener("keydown", evt => {
      if (evt.key === "Escape" && principalFilterOverlay && !principalFilterOverlay.hidden) {
        closeFilterOverlay();
      }
    });

    if (principalFilterForm) {
      principalFilterForm.addEventListener("submit", evt => {
        evt.preventDefault();
        const selectedFocus = Array.from(
          principalFilterForm.querySelectorAll('input[name="focus"]:checked')
        ).map(box => box.value);
        const selectedTiming = Array.from(
          principalFilterForm.querySelectorAll('input[name="timing"]:checked')
        ).map(box => box.value);
        filterState.focus = new Set(selectedFocus.length ? selectedFocus : defaultFocus);
        filterState.timing = new Set(selectedTiming.length ? selectedTiming : defaultTiming);
        const visible = applyPrincipalFilters();
        updateFilterButtonState();
        closeFilterOverlay();
        setPrincipalStatus(`Showing ${visible} of ${principalEventsRows.length} events this week.`);
      });
    }

    if (principalFilterReset) {
      principalFilterReset.addEventListener("click", () => {
        filterState.focus = new Set(defaultFocus);
        filterState.timing = new Set(defaultTiming);
        const visible = applyPrincipalFilters();
        updateFilterButtonState();
        syncFilterForm();
        setPrincipalStatus(`Showing ${visible} of ${principalEventsRows.length} events this week.`);
      });
    }

    function highlightCard(selector) {
      const element = document.querySelector(selector);
      if (!element) return;
      element.classList.add("principal-highlight");
      setTimeout(() => element.classList.remove("principal-highlight"), 1600);
    }

    principalQuickButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const forcedPanel = btn.getAttribute("data-panel-force");
        if (forcedPanel) {
          activatePrincipalPanel(forcedPanel);
        }
        const timing = btn.getAttribute("data-filter-timing");
        const message = btn.getAttribute("data-quick-message");
        if (timing) {
          setPrincipalFilters({
            focus: defaultFocus,
            timing: [timing],
            announce: message || `Filtered to ${timing} events this week.`
          });
        } else if (message) {
          setPrincipalStatus(message);
        }
        const highlightTarget = btn.getAttribute("data-highlight-target");
        if (highlightTarget) {
          highlightCard(highlightTarget);
        }
        const scrollTarget = btn.getAttribute("data-scroll-target");
        if (scrollTarget) {
          const target = document.querySelector(scrollTarget);
          if (target) target.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        btn.classList.add("active");
        setTimeout(() => btn.classList.remove("active"), 1200);
      });
    });

    const principalExportData = {
      "this-week": [
        {
          name: "Book Fair ‚Äî Family Night",
          when: "Tue ¬∑ 5:00 ‚Äì 7:30 PM",
          focus: "Family ¬∑ Fundraiser",
          notes: "Coverage comfortable; cash box pickup at 4:30 PM."
        },
        {
          name: "Walk & Roll to School Day",
          when: "Wed ¬∑ 7:10 ‚Äì 7:45 AM",
          focus: "Student-facing",
          notes: "Needs two additional crosswalk adults."
        },
        {
          name: "Teacher Snack Cart",
          when: "Thu ¬∑ 8:30 ‚Äì 11:30 AM",
          focus: "Staff support",
          notes: "Check storage for extra donations arriving Wednesday."
        },
        {
          name: "Chess Club Tournament Practice",
          when: "Thu ¬∑ 3:00 ‚Äì 4:15 PM",
          focus: "Student enrichment",
          notes: "Confirm dismissal coverage at the car-rider loop."
        },
        {
          name: "PTA Meeting & Budget Q&A",
          when: "Tue ¬∑ 7:00 ‚Äì 8:00 PM",
          focus: "Family ¬∑ Governance",
          notes: "Monitor Zoom chat during the finance report."
        }
      ],
      "next-30": [
        {
          name: "STEM Night",
          when: "Nov 7 ¬∑ 6:00 ‚Äì 8:00 PM",
          focus: "Family ¬∑ STEM",
          notes: "Finalize custodial overtime request by Oct 28."
        },
        {
          name: "Community Garden Clean-Up",
          when: "Nov 9 ¬∑ 9:00 ‚Äì 11:30 AM",
          focus: "Community",
          notes: "Mulch delivery scheduled for Nov 8."
        },
        {
          name: "Holiday Giving Tree Kickoff",
          when: "Nov 4 ‚Äì Nov 15",
          focus: "Community care",
          notes: "Counselors coordinating support for 12 families."
        },
        {
          name: "Teacher Conference Meals",
          when: "Nov 18 ‚Äì Nov 20",
          focus: "Staff support",
          notes: "Catering deposit due Nov 8."
        },
        {
          name: "Winter Concert Support",
          when: "Dec 3 ¬∑ 5:30 ‚Äì 8:30 PM",
          focus: "Students & families",
          notes: "Assign ushers and sound volunteer by Nov 20."
        }
      ],
      "by-grade": [
        {
          name: "Kindergarten",
          when: "Playground refresh helpers ¬∑ Oct 18",
          focus: "Volunteer Chair",
          notes: "Need two more adults for paint touch-ups."
        },
        {
          name: "1st grade",
          when: "Reading Buddies kickoff ¬∑ Oct 24",
          focus: "Teacher Liaison",
          notes: "Record a welcome video for families."
        },
        {
          name: "2nd grade",
          when: "Science lab docents ¬∑ Oct 30",
          focus: "STEM Night Lead",
          notes: "Confirm parent training slides and lab access."
        },
        {
          name: "3rd grade",
          when: "STEM Night presenters ¬∑ Nov 7",
          focus: "VP Programs",
          notes: "Recruit three additional presenters."
        },
        {
          name: "4th grade",
          when: "Walk & Roll route leaders ¬∑ Nov 6",
          focus: "Safety Chair",
          notes: "Staffing on track; send thank-you note afterward."
        },
        {
          name: "5th grade",
          when: "Safety patrol breakfast ¬∑ Nov 15",
          focus: "Treasurer",
          notes: "Awaiting principal approval for early cafeteria access."
        }
      ]
    };

    function exportPrincipalSnapshot() {
      const activePanel = activePanelId;
      const rows = principalExportData[activePanel] || [];
      if (!rows.length) {
        setPrincipalStatus("No data to export for this view.");
        return;
      }
      const header = ["Name", "When", "Focus", "Notes"];
      const csvLines = [header.join(",")];
      rows.forEach(item => {
        const cells = [item.name, item.when, item.focus, item.notes].map(value =>
          `"${String(value).replace(/"/g, '""')}"`
        );
        csvLines.push(cells.join(","));
      });
      const csvContent = csvLines.join("\\n");
      const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      const todayStamp = new Date().toISOString().slice(0, 10);
      link.href = url;
      link.setAttribute("download", `riverbend-principal-${activePanel}-${todayStamp}.csv`);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
      const panelLabel = principalPanelCopy[activePanel]?.label || activePanel;
      setPrincipalStatus(`Downloaded snapshot for ${panelLabel} (${rows.length} rows).`);
    }

    if (principalExportBtn) {
      principalExportBtn.addEventListener("click", exportPrincipalSnapshot);
    }

    activatePrincipalPanel(activePanelId);
    updateFilterButtonState();
    const initialVisible = applyPrincipalFilters();
    setPrincipalStatus(`Showing ${initialVisible} of ${principalEventsRows.length} events this week.`);

    // --- Family event filters ---
    const familyFilterButtons = document.querySelectorAll(".family-filter-pill");
    const familyEventCards = document.querySelectorAll("#family-this-week [data-categories]");
    familyFilterButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const filter = btn.getAttribute("data-filter");
        familyFilterButtons.forEach(b => {
          b.classList.remove("active");
          b.setAttribute("aria-pressed", "false");
        });
        btn.classList.add("active");
        btn.setAttribute("aria-pressed", "true");

        familyEventCards.forEach(card => {
          const categories = card.dataset.categories.split(",").map(c => c.trim());
          const show = filter === "all" || categories.includes(filter);
          card.classList.toggle("filtered-out", !show);
        });
      });
    });
  </script>
</body>
</html>
